<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : Queries.xml
    Created on : 11 de marzo de 2010, 11:03
    Author     : Pablo GARCIA
    Description: AWE Queries File
-->

<queries xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://aweframework.gitlab.io/awe/docs/schemas/queries.xsd">

  <!--
  SESSION
  -->

  <!-- Get Session Default Parameters (sample)-->
  <query id="getSessionToken" service="getSessionToken" public="true">
    <field id="token" alias="token"/>
  </query>

  <!-- Get Session Default Parameters (sample)-->
  <query id="SesPrm" service="SesPrm">
    <field id="module" />
  </query>

  <query id="getAppRoles" distinct="true" public="true">
      <table id="ope" alias="ope"/>
      <field id="Acr" alias="role" table="AwePro"/>
      <join type="LEFT">
          <table id="AwePro" alias="AwePro"/>
          <and>
              <filter condition="eq" left-field="IdePro" left-table="ope" right-field="IdePro" right-table="AwePro"/>
          </and>
      </join>
  </query>

  <!-- Get Default Session Module (sample)
  <query id="ModDef" distinct="true">
    <table id="BatRunAud"/>
    <field id="Dat" alias="value" transform="DATE"/>
    <order-by field="Dat" type="DESC" />
  </query>
  -->

  <!--
  SYSTEM  QUERIES
  -->
  <!-- Get system date with out format dd/MM/yyyy -->
  <query id="SysDat" service="SysDat">
    <field transform="DATE" id="value" alias="value"/>
  </query>

  <!-- Get system time HH:mm:ss-->
  <query id="SysTim" service="SysDat">
    <field transform="TIME" id="value" alias="value"/>
  </query>

  <!--
  LOGS
  -->

  <!-- Get Log List -->
  <query id="getLogList" service="getLogList">
    <field id="action" alias="SrvAct" />
    <field id="path" alias="Fil" />
    <field id="name" alias="Nam" />
    <field id="date" alias="dateMs" transform="DATE_MS"/>
    <field id="date" alias="dateTimestamp" transform="TIMESTAMP"/>
    <compound alias="Dat">
      <computed alias="value" format="[dateMs]"/>
      <computed alias="label" format="[dateTimestamp]"/>
    </compound>
    <order-by field="dateMs" type="DESC"/>
    <variable id="file" type="STRINGN" name="CrtFil" />
    <variable id="date" type="STRINGN" name="CrtDat" />
    <variable id="startTime" type="STRINGN" name="HouIni" />
    <variable id="endTime" type="STRINGN" name="HouFin" />
  </query>

  <!--
  TOOLS
  -->

  <!-- Application parameter list -->
  <query id="getApplicationParameters">
    <table id="AweAppPar" />
    <field id="IdeAweAppPar" alias="identifier" />
    <field id="ParNam" alias="name" />
    <field id="ParVal" alias="value" />
    <field id="Cat" alias="category" translate="CatParTyp" />
    <field id="Des" alias="description" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="ActFlag" />
      </and>
    </where>
    <variable id="ActFlag" type="INTEGER" value="1" />
  </query>

  <!-- SECURITY APPLICATION PARAMETERS -->
  <query id="QryGetNumLog" cacheable="true">
    <table id="AweAppPar" />
    <field id="ParVal" alias="value" />
    <where>
      <and>
        <filter left-field="ParNam" condition="eq" right-variable="Nam" />
      </and>
    </where>
    <variable id="Nam" type="STRING" value="PwdMaxNumLog" />
  </query>

  <query id="QryGetPwdExp" cacheable="true">
    <table id="AweAppPar" />
    <field id="ParVal" alias="value" />
    <where>
      <and>
        <filter left-field="ParNam" condition="eq" right-variable="Nam" />
      </and>
    </where>
    <variable id="Nam" type="STRING" value="PwdExp" />
  </query>

  <query id="QryGetPwdMin" cacheable="true">
    <table id="AweAppPar" />
    <field id="ParVal" alias="value" />
    <where>
      <and>
        <filter left-field="ParNam" condition="eq" right-variable="Nam" />
      </and>
    </where>
    <variable id="Nam" type="STRING" value="MinPwd" />
  </query>

  <query id="QryGetPwdPat" cacheable="true">
    <table id="AweAppPar" />
    <field id="ParVal" alias="CrtPwdPat" />
    <where>
      <and>
        <filter left-field="ParNam" condition="eq" right-variable="Nam" />
      </and>
    </where>
    <variable id="Nam" type="STRING" value="PwdPat" />
  </query>

  <!-- ACTIVE USER SELECT -->
  <query id="UsrActSel" cacheable="true">
    <table id="ope" />
    <field id="IdeOpe" alias="value" />
    <field id="l1_nom" alias="label" />
    <where>
      <and>
        <filter left-field="l1_act" condition="eq" right-variable="Sta" />
      </and>
    </where>
    <variable id="Sta" type="INTEGER" value="1" />
  </query>

  <!-- ACTIVE USER SUGGEST -->
  <query id="UsrActSug" cacheable="true">
    <table id="ope" />
    <field id="IdeOpe" alias="value" />
    <field id="l1_nom" alias="label" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="like" right-variable="Usr" ignorecase="true" />
        <filter left-field="l1_act" condition="eq" right-variable="Sta" />
      </and>
    </where>
    <variable id="Sta" type="INTEGER" value="1" />
    <variable id="Usr" type="STRINGB" name="suggest" />
  </query>

  <!-- USER SUGGEST -->
  <query id="UsrSug" cacheable="true">
    <table id="ope" />
    <field id="IdeOpe" alias="value" />
    <field id="l1_nom" alias="nom" />
    <field id="l1_nom" alias="label" />
    <where>
      <and>
        <or>
          <filter left-field="IdeOpe" condition="eq" right-variable="Ide" optional="true" />
          <filter left-field="l1_nom" condition="like" right-variable="Usr" ignorecase="true" />
        </or>
        <filter left-field="IdePro" condition="eq" right-variable="Pro" optional="true" />
        <filter left-field="l1_act" condition="eq" right-variable="Sta" optional="true" />
      </and>
    </where>
    <variable id="Usr" type="STRINGB" name="suggest" />
    <variable id="Ide" type="INTEGER" name="suggest" />
    <variable id="Pro" type="INTEGER" name="CrtPro" optional="true" />
    <variable id="Sta" type="INTEGER" name="CrtSta" optional="true" />
  </query>

  <!-- User suggest -->
  <query id="UsrSugVal" cacheable="true">
    <table id="ope" />
    <field id="IdeOpe" alias="value" />
    <field id="l1_nom" alias="nom" />
    <field id="l1_nom" alias="label" />
    <where>
      <and>
        <filter left-field="IdeOpe" condition="eq" right-variable="Usr" ignorecase="true" />
      </and>
    </where>
    <variable id="Usr" type="INTEGER" name="suggest" />
  </query>

  <!-- USER NAME SUGGEST -->
  <query id="UsrNamSug" cacheable="true">
    <table id="ope" />
    <field id="l1_nom" alias="value" />
    <field id="l1_nom" alias="label" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="like" right-variable="Usr" ignorecase="true" />
        <filter left-field="l1_act" condition="eq" right-variable="Sta" optional="true" />
      </and>
    </where>
    <variable id="Usr" type="STRINGB" name="suggest" />
    <variable id="Sta" type="INTEGER" name="CrtSta" />
  </query>

  <!-- GET USER INFO -->
  <query id="UsrInf" cacheable="true" public="true">
    <table id="ope" alias="ope" />
    <table id="AwePro" alias="pro" />
    <field id="l1_nom" alias="Usr" />
    <field id="l1_pas" alias="Pwd" />
    <field id="Res" table="ope" alias="UsrRes" />
    <field id="Res" table="pro" alias="ProRes" />
    <field id="Acr" table="pro" alias="Pro" />
    <field id="l1_lan" alias="Lan" />
    <where>
      <and>
        <filter left-field="IdePro" left-table="ope" condition="eq" right-field="IdePro" right-table="pro" />
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" trim="true" />
        <filter left-field="l1_act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="Usr" type="STRING" name="Usr" />
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- AUTHENTICATE USER -->
  <query id="AutUsr" public="true">
    <table id="ope" alias="ope" />
    <table id="AwePro" alias="pro" />
    <field id="IdeOpe" alias="IdeOpe" />
    <field id="l1_nom" alias="Usr" />
    <field id="l1_pas" alias="Pwd" />
    <field id="OpePas" alias="NewPwd" />
    <field id="NumLog" alias="NumLog" />
    <field id="PwdLck" alias="PwdLck" />
    <where>
      <and>
        <filter left-field="IdePro" left-table="ope" condition="eq" right-field="IdePro" right-table="pro" />
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" trim="true" />
        <filter left-field="l1_act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="Usr" type="STRING" name="Usr" />
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- Get change password date -->
  <query id="GetChgPwdUsr" public="true">
    <table id="ope" alias="ope" />
    <field id="l1_psd" alias="l1_psd" transform="DATE" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" trim="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" name="Usr" />
  </query>


  <!-- USER CHECK UNIQUE -->
  <query id="UsrChkUni" cacheable="true">
    <table id="ope" />
    <field id="l1_nom" alias="Usr" />
    <field id="l1_pas" alias="Pwd" />
    <field id="l1_lan" alias="Lan" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" trim="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" name="Usr" />
  </query>

  <!-- USER LIST -->
  <query id="UsrLst" cacheable="true">
    <table id="ope" alias="ope" />
    <field id="IdeOpe" table="ope" alias="id" />
    <field id="IdeOpe" table="ope" alias="IdeOpe" />
    <field id="l1_nom" table="ope" alias="Nom" />
    <field id="Nam" table="Pro" alias="ProTxt" />
    <field id="IdePro" table="Pro" alias="Pro" />
    <field id="Nam" table="thm" alias="ThmTxt" />
    <field id="IdeThm" table="thm" alias="Thm" />
    <field id="ScrIni" table="ope" alias="ScrIni" />
    <field id="Res" table="ope" alias="Res" />
    <field id="l1_act" table="ope" alias="Sta" />
    <field id="PcPrn" table="ope" alias="Prn" />
    <field id="WebPrn" table="ope" alias="WebPrn" />
    <field id="EmlAdr" table="ope" alias="Eml" />
    <field id="EmlSrv" table="ope" alias="EmlSrv" />
    <field id="l1_lan" table="ope" alias="Lan" />
    <field id="l1_lan" table="ope" alias="LanTxt" translate="LanUsr" />
    <compound alias="LanImg">
      <computed format="images/flags/[Lan].svg" alias="image" />
      <computed format="[Lan]-flag" alias="style" />
      <computed format="[LanTxt]" alias="label" />
    </compound>
    <field id="l1_act" table="ope" alias="StaTxt" translate="Es1Es0" />
    <field id="PwdLck" table="ope" alias="PwdLck" />
    <compound alias="BlkIco">
      <computed format="'[PwdLck]' == '0' ? 'fa-unlock' : 'fa-lock'" alias="icon" eval="true"/>
      <computed format="[PwdLck]" alias="label" translate="Es1Es0" />
    </compound>
    <compound alias="StaIco">
      <computed format="'[Sta]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Sta]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[StaTxt]" alias="label" />
    </compound>
    <field id="OpeNam" table="ope" alias="Nam" />
    <join>
      <table id="AwePro" alias="Pro" />
      <and>
        <filter left-field="IdePro" left-table="ope" condition="eq" right-field="IdePro" right-table="Pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="AweThm" alias="thm" />
      <and>
        <filter left-field="IdeThm" left-table="ope" condition="eq" right-field="IdeThm" right-table="thm" />
      </and>
    </join>
    <where>
      <and>
        <or>
          <filter left-field="IdeOpe" left-table="ope" condition="eq" right-variable="UsrCod" optional="true" />
          <filter left-field="l1_nom" left-table="ope" condition="like" right-variable="UsrTxt" optional="true" />
        </or>
        <filter left-field="IdePro" left-table="ope" condition="eq" right-variable="Pro" optional="true" />
        <filter left-field="IdeThm" left-table="ope" condition="eq" right-variable="Thm" optional="true" />
        <filter left-field="ScrIni" left-table="ope" condition="eq" right-variable="Scr" ignorecase="true" optional="true" />
        <filter left-field="l1_act" left-table="ope" condition="eq" right-variable="active" optional="true" />
        <filter left-field="PwdLck" left-table="ope" condition="eq" right-variable="PwdLck" ignorecase="true" optional="true" />
      </and>
    </where>
    <variable id="UsrCod" type="INTEGER" name="CrtUsr" optional="true" />
    <variable id="UsrTxt" type="STRINGB" name="CrtUsr" optional="true" />
    <variable id="Pro" type="INTEGER" name="CrtPro" optional="true" />
    <variable id="active" type="INTEGER" name="CrtSta" optional="true" />
    <variable id="Thm" type="INTEGER" name="CrtThm" optional="true" />
    <variable id="Scr" type="STRING" name="CrtScr" optional="true" />
    <variable id="PwdLck" type="STRING" name="CrtBlk" optional="true" />
  </query>

  <!-- USER DATA -->
  <query id="userDetails" cacheable="true">
    <table id="ope" alias="Usr" />
    <field id="IdeOpe" table="Usr" alias="userId" />
    <field id="l1_nom" table="Usr" alias="user" />
    <field id="IdePro" table="Usr" alias="profileId" />
    <field id="Acr" table="Pro" alias="profile" />
    <field id="Nam" table="Pro" alias="profileName" />
    <field id="IdeThm" table="Usr" alias="themeId" />
    <field id="Nam" table="UsrThm" alias="userTheme" />
    <field id="Nam" table="ProThm" alias="profileTheme" />
    <field id="ScrIni" table="Usr" alias="userInitialScreen" />
    <field id="ScrIni" table="Pro" alias="profileInitialScreen" />
    <field id="Res" table="Usr" alias="userRestriction" />
    <field id="Res" table="Pro" alias="profileRestriction" />
    <field id="l1_act" table="Usr" alias="active" />
    <field id="PwdLck" table="Usr" alias="locked" />
    <field id="l1_psd" table="Usr" alias="lastChangedPasswordDate" />
    <field id="l1_con" table="Usr" alias="connected" />
    <field id="l1_dat" table="Usr" alias="lastLogin" />
    <field id="dat_mod" table="Usr" alias="updateDate" />
    <field id="PcPrn" table="Usr" alias="printer" />
    <field id="WebPrn" table="Usr" alias="webPrinter" />
    <field id="EmlAdr" table="Usr" alias="email" />
    <field id="EmlSrv" table="Usr" alias="emailServer" />
    <field id="l1_lan" table="Usr" alias="language" />
    <field id="OpeNam" table="Usr" alias="fullName" />
    <field id="l1_pas" table="Usr" alias="password" />
    <field id="numLog" table="Usr" alias="loginAttempts" />
    <join>
      <table id="AwePro" alias="Pro" />
      <and>
        <filter left-field="IdePro" left-table="Usr" condition="eq" right-field="IdePro" right-table="Pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="AweThm" alias="UsrThm" />
      <and>
        <filter left-field="IdeThm" left-table="Usr" condition="eq" right-field="IdeThm" right-table="UsrThm" />
      </and>
    </join>
    <join type="LEFT">
      <table id="AweThm" alias="ProThm" />
      <and>
        <filter left-field="IdeThm" left-table="Pro" condition="eq" right-field="IdeThm" right-table="ProThm" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" trim="true" ignorecase="true"/>
      </and>
    </where>
    <variable id="Usr" type="STRING" name="user" />
  </query>

  <!-- USER NAME -->
  <query id="UsrNam" cacheable="true">
    <table id="ope" />
    <field id="OpeNam" alias="Nam" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" ignorecase="true"/>
      </and>
    </where>
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <!-- ACCESS SCREENS -->
  <query id="ScrAccLst">
    <table id="AweScrRes" alias="scrRes" />
    <field id="IdeAweScrRes" table="scrRes" alias="id" />
    <field id="IdeAweScrRes" table="scrRes" alias="IdeAweScrRes" />
    <field id="IdePro" table="scrRes" alias="IdeProVal" />
    <field id="Nam" table="pro" alias="IdeProNam" />
    <compound alias="IdePro">
      <computed alias="value" format="[IdeProVal]"/>
      <computed alias="label" format="[IdeProNam]"/>
    </compound>
    <field id="IdeOpe" table="scrRes" alias="IdeOpeVal" />
    <field id="l1_nom" table="ope" alias="IdeOpeNam" />
    <compound alias="IdeOpe">
      <computed alias="value" format="[IdeOpeVal]"/>
      <computed alias="label" format="[IdeOpeNam]"/>
    </compound>
    <field id="IdeMod" table="scrRes" alias="IdeModVal" />
    <compound alias="IdeMod">
      <computed alias="value" format="[IdeModVal]"/>
      <computed alias="label" format="[Mod]"/>
    </compound>
    <field id="Nam" table="mod" alias="Mod" />
    <field id="Opt" table="scrRes" alias="Opt" />
    <field id="AccMod" table="scrRes" alias="AccMod" />
    <field id="Act" table="scrRes" alias="Act" />
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="scrRes" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="scrRes" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="scrRes" condition="eq" right-field="IdeMod" right-table="mod" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdePro" left-table="scrRes" condition="eq" right-variable="IdePro" optional="true" />
        <filter left-field="IdeOpe" left-table="scrRes" condition="in" right-variable="IdeOpe" optional="true" />
        <filter left-field="IdeMod" left-table="scrRes" condition="eq" right-variable="IdeMod" optional="true" />
        <filter left-field="AccMod" left-table="scrRes" condition="like" right-variable="AccMod" optional="true" />
        <filter left-field="Opt" left-table="scrRes" condition="in" right-variable="Opt" optional="true" />
        <filter left-field="Act" left-table="scrRes" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="IdeOpe" type="INTEGER" name="CrtOpe" />
    <variable id="IdePro" type="INTEGER" name="CrtPro" />
    <variable id="IdeMod" type="INTEGER" name="CrtMod" />
    <variable id="AccMod" type="STRING" name="CrtAccMod" />
    <variable id="Opt" type="STRING" name="CrtOpc" />
    <variable id="active" type="INTEGER" name="CrtSta" />
  </query>

  <!-- NAME OF PROFILE FILES LIST (Service ProFilLst -->
  <query id="ProNamLst" service="ProFilLst" cacheable="true">
    <field id="value" />
    <computed format="[value]" alias="label" />
  </query>

  <!-- Screen restrictions -->
  <query id="getScreenRestrictions" public="true" cacheable="true" service="getScreenRestrictions">
    <field id="option"/>
    <field id="restricted"/>
    <variable id="restriction" type="STRING" session="restriction"/>
  </query>

  <!-- OPTION ACCESS RESTRICTIONS -->
  <query id="getOptionRestrictionFromDatabase">
    <table id="AweScrRes" alias="scrRes" />
    <field id="IdeOpe" table="ope" alias="IdeOpe" noprint="true"/>
    <field id="IdePro" table="pro" alias="IdePro" noprint="true"/>
    <field id="Acr" table="pro" alias="Pro" />
    <field id="l1_nom" table="ope" alias="Usr" />
    <field id="Nam" table="mod" alias="module" />
    <field id="Opt" table="scrRes" alias="option" />
    <field id="AccMod" table="scrRes" alias="access" />
    <computed alias="restricted" format="'[access]' == 'R' ? true : false" eval="true" nullValue="R"/>
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="scrRes" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="scrRes" condition="eq" right-field="IdeOpe" right-table="ope"/>
      </and>
    </join>
    <join type="LEFT">
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="scrRes" condition="eq" right-field="IdeMod" right-table="mod" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Act" left-table="scrRes" condition="eq" right-variable="active" />
        <or>
          <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="user" ignorecase="true" optional="true"/>
          <filter left-field="IdeOpe" left-table="scrRes" condition="is null"/>
        </or>
        <or>
          <filter left-field="Acr" left-table="pro" condition="eq" right-variable="profile" trim="true" optional="true"/>
          <filter left-field="IdePro" left-table="scrRes" condition="is null"/>
        </or>
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="profile" type="STRING" session="profile" />
    <variable id="user" type="STRING" session="user" />
    <order-by field="IdeAweScrRes"/>
  </query>

  <!-- SCREEN SUGGEST (Service getAvailableScreenList) -->
  <query id="getScreenList" service="getScreenList" cacheable="true">
    <field id="value"/>
    <field id="label"/>
    <variable id="screen" type="STRING" name="suggest" />
  </query>

  <!-- OPTION MENU SUGGEST (Service getNameOptionList) -->
  <query id="getOptionList" service="getOptionList" cacheable="true">
    <field id="value"/>
    <field id="label"/>
    <variable id="option" type="STRING" name="suggest" />
  </query>

  <!-- MODULES SUGGEST -->
  <query id="ModSug" cacheable="true">
    <table id="AweMod" />
    <field id="IdeMod" alias="value" />
    <field id="Nam" alias="label" />
    <where>
      <and>
        <or>
          <filter left-field="IdeMod" condition="eq" right-variable="key" optional="true" />
          <filter left-field="Nam" condition="like" right-variable="suggest" ignorecase="true" />
        </or>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="suggest" type="STRINGB" name="suggest" />
    <variable id="key" type="INTEGER" name="suggest" />
  </query>

  <!-- MODULES SUGGEST INITIAL VALUE -->
  <query id="ModIni" cacheable="true">
    <table id="AweMod" />
    <field id="IdeMod" alias="value" />
    <field id="Nam" alias="label" />
    <where>
      <and>
        <filter left-field="IdeMod" condition="eq" right-variable="Nam"/>
        <filter left-field="Act" condition="eq" right-variable="active"/>
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="Nam" type="INTEGER" name="suggest" />
  </query>

  <!-- MODULE SELECT (Service getModuleList) -->
  <query id="ModSel" service="getModuleList" cacheable="true">
    <field id="value" />
    <computed format="[value]" alias="label" />
  </query>

  <!-- MODULES SELECT FROM BD -->
  <query id="ModSelBD" cacheable="true">
    <table id="AweMod" />
    <field id="IdeMod" alias="value" />
    <field id="Nam" alias="Nam" />
    <computed format="[Nam]" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- DATABASE ALIAS SELECT LIST BY SITE AND MODULE -->
  <query id="DbsAlsBySitModSel" cacheable="true">
    <table id="AweDbs" alias="dbs" />
    <field id="Als" table="dbs" alias="value" />
    <field id="Als" table="dbs" alias="Als" />
    <field id="Des" table="dbs" alias="Des" />
    <computed format="[Des]" alias="label" />
    <field id="Ord" table="sitModDbs" alias="Ord" />
    <join>
      <table id="AweSitModDbs" alias="sitModDbs" />
      <and>
        <filter left-field="IdeDbs" left-table="dbs" condition="eq" right-field="IdeDbs" right-table="sitModDbs" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="mod" condition="eq" right-field="IdeMod" right-table="sitModDbs" />
      </and>
    </join>
    <join>
      <table id="AweSit" alias="sit" />
      <and>
        <filter left-field="IdeSit" left-table="sit" condition="eq" right-field="IdeSit" right-table="sitModDbs" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Nam" left-table="sit" condition="eq" right-variable="site" trim="true" />
        <filter left-field="Nam" left-table="mod" condition="eq" right-variable="module" trim="true" />
      </and>
    </where>
    <variable id="site" type="STRING" session="site" />
    <variable id="module" type="STRING" session="module" />
    <order-by field="Ord" table="sitModDbs" />
  </query>

  <!-- NAMES SITES BY USER AND MODULE SELECT-->
  <query id="SitNamByOpeSel" distinct="true" cacheable="true">
    <table id="AweSit" alias="sit" />
    <field id="Nam" table="sit" alias="value" />
    <field id="Nam" table="sit" alias="label" />
    <field id="Ord" table="sit" />
    <join>
      <table id="AweSitModDbs" alias="sitModDbs" />
      <and>
        <filter left-field="IdeSit" left-table="sit" condition="eq" right-field="IdeSit" right-table="sitModDbs" />
        <filter left-field="Act" left-table="sit" condition="eq" right-variable="active"/>
      </and>
    </join>
    <join>
      <table id="AweModOpe" alias="modOpe" />
      <and>
        <filter left-field="IdeMod" left-table="modOpe" condition="eq" right-field="IdeMod" right-table="sitModDbs" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="mod" condition="eq" right-field="IdeMod" right-table="modOpe" />
        <filter left-field="Nam" left-table="mod" condition="eq" right-variable="Mod" trim="true" />
        <filter left-field="Act" left-table="mod" condition="eq" right-variable="active"/>
      </and>
    </join>
    <join>
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="ope" condition="eq" right-field="IdeOpe" right-table="modOpe" />
        <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="Usr" ignorecase="true" />
        <filter left-field="l1_act" left-table="ope" condition="eq" right-variable="active" />
      </and>
    </join>
    <union query="SitNamByOpePro" />
    <variable id="Usr" type="STRING" session="user" />
    <variable id="Mod" type="STRING" session="module" />
    <variable id="active" type="INTEGER" value="1" />
    <order-by field="Ord" />
  </query>
  <query id="SitNamByOpePro" distinct="true" cacheable="true">
    <table id="AweSit" alias="sitPro" />
    <field id="Nam" table="sitPro" alias="value" />
    <field id="Nam" table="sitPro" alias="label" />
    <field id="Ord" table="sitPro" />
    <join>
      <table id="AweSitModDbs" alias="sitModDbs" />
      <and>
        <filter left-field="IdeSit" left-table="sitPro" condition="eq" right-field="IdeSit" right-table="sitModDbs" />
        <filter left-field="Act" left-table="sitPro" condition="eq" right-variable="active"/>
      </and>
    </join>
    <join>
      <table id="AweModPro" alias="modPro" />
      <and>
        <filter left-field="IdeMod" left-table="modPro" condition="eq" right-field="IdeMod" right-table="sitModDbs" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="mod" condition="eq" right-field="IdeMod" right-table="modPro" />
        <filter left-field="Nam" left-table="mod" condition="eq" right-variable="Mod" trim="true" />
        <filter left-field="Act" left-table="mod" condition="eq" right-variable="active"/>
      </and>
    </join>
    <join>
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="pro" condition="eq" right-field="IdePro" right-table="modPro" />
        <filter left-field="Acr" left-table="pro" condition="eq" right-variable="Pro" trim="true" />
        <filter left-field="Act" left-table="pro" condition="eq" right-variable="active" />
      </and>
    </join>
    <variable id="Pro" type="STRING" session="profile" />
    <variable id="Mod" type="STRING" session="module" />
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- NAMES MODULES BY USER SELECT-->
  <query id="ModNamByOpeSel" distinct="true" cacheable="true">
    <table id="AweModOpe" alias="modOpe" />
    <field id="Nam" table="mod" alias="value" />
    <field id="Nam" table="mod" alias="Nam" />
    <computed format="[Nam]" alias="label" />
    <join>
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="ope" condition="eq" right-field="IdeOpe" right-table="modOpe" />
        <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="Usr" ignorecase="true" />
        <filter left-field="l1_act" left-table="ope" condition="eq" right-variable="active" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="mod" condition="eq" right-field="IdeMod" right-table="modOpe" />
        <filter left-field="Act" left-table="mod" condition="eq" right-variable="active" />
      </and>
    </join>
    <union query="ModNamByOpePro" />
    <variable id="Usr" type="STRING" session="user" />
    <variable id="active" type="INTEGER" value="1" />
  </query>
  <query id="ModNamByOpePro" distinct="true" cacheable="true">
    <table id="AweModPro" alias="modPro" />
    <field id="Nam" table="mod" alias="value" />
    <field id="Nam" table="mod" alias="Nam" />
    <computed format="[Nam]" alias="label" />
    <join>
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="pro" condition="eq" right-field="IdePro" right-table="modPro" />
        <filter left-field="Acr" left-table="pro" condition="eq" right-variable="Pro" trim="true" />
        <filter left-field="Act" left-table="pro" condition="eq" right-variable="active" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="mod" condition="eq" right-field="IdeMod" right-table="modPro" />
        <filter left-field="Act" left-table="mod" condition="eq" right-variable="active" />
      </and>
    </join>
    <variable id="Pro" type="STRING" session="profile" />
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- MODULE LIST -->
  <query id="ModLst" cacheable="true">
    <table id="AweMod" alias="mod" />
    <field id="IdeMod" table="mod" alias="id" />
    <field id="IdeMod" table="mod" alias="IdeMod" />
    <field id="Nam" table="mod" alias="Nam" />
    <field id="ScrIni" table="mod" alias="ScrIni" />
    <field id="Nam" table="thm" alias="ThmTxt" />
    <field id="IdeThm" table="mod" alias="IdeThm" />
    <field id="Act" table="mod" alias="ActTxt" translate="Es1Es0" />
    <field id="Act" table="mod" alias="Act" />
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[ActTxt]" alias="label" />
    </compound>
    <join type="LEFT">
      <table id="AweThm" alias="thm" />
      <and>
        <filter left-field="IdeThm" left-table="mod" condition="eq" right-field="IdeThm" right-table="thm" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeMod" left-table="mod" condition="eq" right-variable="IdeMod" optional="true" />
        <filter left-field="IdeThm" left-table="mod" condition="eq" right-variable="IdeThm" optional="true" />
        <filter left-field="ScrIni" left-table="mod" condition="eq" right-variable="ScrIni" optional="true" />
        <filter left-field="Act" left-table="mod" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="IdeMod" type="INTEGER" name="CrtMod" />
    <variable id="IdeThm" type="INTEGER" name="CrtThm" />
    <variable id="ScrIni" type="STRING" name="CrtScr" />
    <variable id="active" type="INTEGER" name="CrtSta" />
  </query>

  <!-- USERS BY MODULE LIST-->
  <query id="QryLstUsrByMod" cacheable="true">
    <table id="AweModOpe" alias="modOpe" />
    <field id="IdeModOpe" table="modOpe" alias="IdeModOpe" />
    <field id="IdeOpe" table="ope" alias="IdeOpe" />
    <field id="l1_nom" table="ope" alias="l1_nom" />
    <field id="OpeNam" table="ope" alias="OpeNam" />
    <field id="EmlAdr" table="ope" alias="EmlAdr" />
    <field id="IdeThm" table="thm" alias="IdeThm" />
    <field id="Nam" table="thm" alias="OpeThm" />
    <join>
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="modOpe" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <join>
      <table id="AweThm" alias="thm" />
      <and>
        <filter left-field="IdeThm" left-table="modOpe" condition="eq" right-field="IdeThm" right-table="thm" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeMod" left-table="modOpe" condition="eq" right-variable="IdeMod" />
      </and>
    </where>
    <variable id="IdeMod" type="INTEGER" name="IdeMod" />
  </query>

  <!-- PROFILES BY MODULE LIST-->
  <query id="QryLstProByMod" cacheable="true">
    <table id="AweModPro" alias="modPro" />
    <field id="IdeModPro" table="modPro" alias="IdeModPro" />
    <field id="IdePro" table="pro" alias="IdeProVal" />
    <field id="Acr" table="pro" alias="ProAcr" />
    <field id="Nam" table="pro" alias="ProNam" />
    <compound alias="IdePro">
      <computed format="[IdeProVal]" alias="value" />
      <computed format="[ProAcr] - [ProNam]" alias="label" />
    </compound>
    <join>
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="modPro" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeMod" left-table="modPro" condition="eq" right-variable="IdeMod" />
      </and>
    </where>
    <variable id="IdeMod" type="INTEGER" name="IdeMod" />
  </query>


  <!-- PROFILES SUGGEST -->
  <query id="ProSug" cacheable="true">
    <table id="AwePro" />
    <field id="IdePro" alias="value" />
    <field id="Acr" alias="Acr" />
    <field id="Nam" alias="Nam" />
    <computed format="[Acr] - [Nam]" alias="label" />
    <where>
      <or>
        <filter left-field="Acr" condition="like" right-variable="Pro" ignorecase="true" />
        <filter left-field="Nam" condition="like" right-variable="Pro" ignorecase="true" />
      </or>
    </where>
    <variable id="IdePro" type="STRING" name="suggest" />
    <variable id="Pro" type="STRINGB" name="suggest" />
  </query>

  <!-- PROFILES INITIAL VALUE -->
  <query id="ProIni" cacheable="true">
    <table id="AwePro" />
    <field id="IdePro" alias="value" />
    <field id="Acr" alias="Acr" />
    <field id="Nam" alias="Nam" />
    <computed format="[Acr] - [Nam]" alias="label" />
    <where>
      <or>
        <filter left-field="IdePro" condition="eq" right-variable="IdePro" />
      </or>
    </where>
    <variable id="IdePro" type="INTEGER" name="suggest" />
  </query>

  <!-- PROFILES SELECT -->
  <query id="ProSel" cacheable="true">
    <table id="AwePro" />
    <field id="IdePro" alias="value" />
    <field id="Acr" alias="Acr" />
    <field id="Nam" alias="Nam" />
    <computed format="[Acr] - [Nam]" alias="label" />
    <where>
      <and>
        <or>
          <filter left-field="Act" condition="eq" right-variable="active" />
        </or>
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- PROFILES LIST -->
  <query id="ProLst" cacheable="true">
    <table id="AwePro" alias="Pro" />
    <field id="IdePro" table="Pro" alias="id" />
    <field id="IdePro" table="Pro" alias="IdePro" />
    <field id="Acr" table="Pro" alias="Acr" />
    <field id="Nam" table="Pro" alias="Nam" />
    <field id="Nam" table="thm" alias="ThmTxt" />
    <field id="IdeThm" table="Pro" alias="IdeThm" />
    <field id="ScrIni" table="Pro" alias="ScrIni" />
    <field id="Res" table="Pro" alias="Res" />
    <field id="Act" table="Pro" alias="Act" />
    <field id="Act" table="Pro" alias="ActTxt" translate="Es1Es0" />
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[ActTxt]" alias="label" />
    </compound>
    <join type="LEFT">
      <table id="AweThm" alias="thm" />
      <and>
        <filter left-field="IdeThm" left-table="Pro" condition="eq" right-field="IdeThm" right-table="thm" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdePro" left-table="Pro" condition="eq" right-variable="IdePro" optional="true" />
        <filter left-field="IdeThm" left-table="Pro" condition="eq" right-variable="IdeThm" optional="true" />
        <filter left-field="ScrIni" left-table="Pro" condition="like" right-variable="CrtScrIni" optional="true" />
        <filter left-field="Act" left-table="Pro" condition="eq" right-variable="CrtAct" optional="true" />
      </and>
    </where>
    <variable id="IdePro" type="INTEGER" name="CrtPro" />
    <variable id="IdeThm" type="INTEGER" name="CrtThm" />
    <variable id="CrtScrIni" type="STRINGN" name="CrtScrIni" />
    <variable id="CrtAct" type="INTEGER" name="CrtAct" />
  </query>

  <!-- THEMES SUGGEST -->
  <query id="ThmSug" distinct="true" cacheable="true">
    <table id="AweThm" />
    <field id="IdeThm" alias="value" />
    <field id="Nam" alias="Nam" />
    <computed format="[Nam]" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
        <or>
          <filter left-field="IdeThm" condition="eq" right-variable="themeId" optional="true"/>
          <filter left-field="Nam" condition="like" right-variable="themeName" ignorecase="true" optional="true"/>
        </or>
      </and>
    </where>
    <variable id="themeId" type="INTEGER" name="suggest" />
    <variable id="themeName" type="STRINGB" name="suggest" />
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- THEME SELECTION -->
  <query id="ThmSel" cacheable="true">
    <table id="AweThm" />
    <field id="IdeThm" alias="value" />
    <field id="Nam" alias="label" />
  </query>

  <!-- THEME SELECTION (Getting the theme name as value) -->
  <query id="ThmSelVal" cacheable="true">
    <table id="AweThm" />
    <field id="Nam" alias="value" />
    <field id="Nam" alias="label" />
  </query>

  <!-- THEMES LIST -->
  <query id="ThmLst" cacheable="true">
    <table id="AweThm" />
    <field id="IdeThm" alias="id" />
    <field id="IdeThm" alias="IdeThm" />
    <field id="Nam" alias="NamVal" />
    <compound alias="Nam">
      <computed alias="label" format="[NamVal]"/>
      <computed alias="value" format="[NamVal]"/>
      <computed alias="title" format="[NamVal]"/>
    </compound>
    <field id="Act" alias="Act" />
    <field id="Act" alias="ActTxt" translate="Es1Es0" />
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[ActTxt]" alias="label" />
    </compound>
    <where>
      <and>
        <or>
          <filter left-field="IdeThm" condition="eq" right-variable="IdeThm" optional="true" />
        </or>
        <filter left-field="Act" condition="eq" right-variable="CrtAct" optional="true" />
      </and>
    </where>
    <variable id="IdeThm" type="INTEGER" name="CrtNam" />
    <variable id="CrtAct" type="INTEGER" name="CrtAct" />
  </query>

  <!-- GET SCREEN CONFIGURATION TO SINGLETON-->
  <query id="getScreenConfiguration" cacheable="true" public="true">
    <table id="AweScrCnf" alias="ScrCnf" />
    <field id="IdeAweScrCnf" table="ScrCnf" alias="id" />
    <field id="l1_nom" table="ope" alias="user" />
    <field id="Acr" table="pro" alias="profile" />
    <field id="Nam" table="ScrCnf" alias="component" />
    <field id="Scr" table="ScrCnf" alias="screen" />
    <field id="Atr" table="ScrCnf" alias="attribute" />
    <field id="Val" table="ScrCnf" alias="value" />
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="ScrCnf" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="ScrCnf" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Act" left-table="ScrCnf" condition="eq" right-variable="active" />
        <or>
          <filter left-field="Scr" left-table="ScrCnf" condition="eq" right-variable="screen"/>
          <filter left-field="Scr" left-table="ScrCnf" condition="is null"/>
        </or>
        <or>
          <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="user" ignorecase="true" optional="true"/>
          <filter left-field="IdeOpe" left-table="ScrCnf" condition="is null"/>
        </or>
        <or>
          <filter left-field="Acr" left-table="pro" condition="eq" right-variable="profile" trim="true" optional="true"/>
          <filter left-field="IdePro" left-table="ScrCnf" condition="is null"/>
        </or>
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="screen" type="STRING" name="screen"/>
    <variable id="user" type="STRING" session="user"/>
    <variable id="profile" type="STRING" session="profile"/>
  </query>

  <!-- GET SCREEN CONFIGURATION LIST -->
  <query id="ScrCnfLst" cacheable="true">
    <table id="AweScrCnf" alias="scrCnf" />
    <field id="IdeAweScrCnf" table="scrCnf" alias="id" />
    <field id="IdeAweScrCnf" table="scrCnf" alias="IdeAweScrCnf" />
    <field id="IdeOpe" table="scrCnf" alias="IdeOpeVal" />
    <field id="l1_nom" table="ope" alias="IdeOpeNam" />
    <compound alias="IdeOpe">
      <computed format="[IdeOpeVal]" alias="value" />
      <computed format="[IdeOpeNam]" alias="label" />
    </compound>
    <field id="IdePro" table="scrCnf" alias="IdeProVal" />
    <field id="Nam" table="pro" alias="IdeProNam" />
    <compound alias="IdePro">
      <computed format="[IdeProVal]" alias="value" />
      <computed format="[IdeProNam]" alias="label" />
    </compound>
    <field id="Nam" table="scrCnf" alias="NamVal" />
    <compound alias="Nam">
      <computed format="[NamVal]" alias="value" />
      <computed format="[NamVal]" alias="label" />
    </compound>
    <field id="Scr" table="scrCnf" alias="Scr" />
    <field id="Atr" table="scrCnf" alias="AtrVal" />
    <compound alias="Atr">
      <computed format="[AtrVal]" alias="value" />
      <computed format="[AtrVal]" alias="label" translate="ScrCnfAtrTyp" />
    </compound>
    <field id="Val" table="scrCnf" alias="Val" />
    <field id="Act" table="scrCnf" alias="Act" />
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="scrCnf" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="scrCnf" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Scr" left-table="scrCnf" condition="eq" right-variable="Scr" optional="true" />
        <filter left-field="IdeOpe" left-table="ope" condition="eq" right-variable="IdeOpe" optional="true" />
        <filter left-field="IdePro" left-table="pro" condition="eq" right-variable="IdePro" optional="true" />
        <filter left-field="Act" left-table="scrCnf" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="Scr" type="STRING" name="CrtScr" />
    <variable id="IdeOpe" type="INTEGER" name="CrtUsr" />
    <variable id="IdePro" type="INTEGER" name="CrtPro" />
    <variable id="active" type="INTEGER" name="CrtAct" />
  </query>

  <!-- Screen attribute select -->
  <query id="getAttributeNameList" service="getAttributeNameList" cacheable="true">
    <field id="value"/>
    <field id="label"/>
    <variable id="attributeKey" type="STRING" name="suggest" />
  </query>

  <!-- Elements of screen suggest (Service java getScreenElementList) -->
  <query id="getScreenElementList" service="getScreenElementList" cacheable="true">
    <field id="value"/>
    <field id="label"/>
    <variable id="screenName" type="STRING" name="Scr.selected" />
    <variable id="element" type="STRING" name="suggest" />
  </query>

  <!-- DATA BASE SUGGEST -->
  <query id="DbsSug" cacheable="true">
    <table id="AweDbs" />
    <field id="IdeDbs" alias="value" />
    <field id="Als" alias="Als" />
    <field id="Dct" alias="Dct" translate="DbsTyp" />
    <field id="Typ" alias="type" translate="EnvTyp" />
    <computed format="[Als] ([type]-[Dct])" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
        <or>
          <filter left-field="IdeDbs" condition="eq" right-variable="key" optional="true" />
          <filter left-field="Als" condition="like" right-variable="alias" ignorecase="true" />
        </or>
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="alias" type="STRINGB" name="suggest" />
    <variable id="key" type="INTEGER" name="suggest" />
  </query>

  <!-- DATA BASE SELECT -->
  <query id="DbsSel" cacheable="true">
    <table id="AweDbs" />
    <field id="IdeDbs" alias="value" />
    <field id="Als" alias="Als" />
    <field id="Dct" alias="Dct" translate="DbsTyp" />
    <field id="Typ" alias="type" translate="EnvTyp" />
    <computed format="[Als] ([type]-[Dct])" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- DATA BASE INFORMATION -->
  <query id="DatabaseConnections" cacheable="true">
    <table id="AweDbs" />
    <field id="Als" alias="alias" />
    <field id="Des" alias="description" />
    <field id="Dct" alias="connectionType" />
    <field id="Typ" alias="environment" />
    <field id="Dbc" alias="url" />
    <field id="Dbt" alias="databaseType" />
    <field id="DbsUsr" alias="user" />
    <field id="DbsPwd" alias="password" transform="DECRYPT" />
    <field id="Drv" alias="driver" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- DATA BASE LIST -->
  <query id="DbsLst" cacheable="true">
    <table id="AweDbs" />
    <field id="IdeDbs" alias="id" />
    <field id="IdeDbs" alias="IdeDbs" />
    <field id="Als" alias="Als" />
    <field id="Des" alias="Des" />
    <field id="Dct" alias="Dct" />
    <field id="Dct" alias="DctTxt" translate="DbsTyp" />
    <field id="Typ" alias="Typ" />
    <field id="Typ" alias="TypTxt" translate="EnvTyp" />
    <field id="Dbc" alias="Dbc" />
    <field id="Dbt" alias="Dbt" />
    <field id="Dbt" alias="DbtTxt" translate="EnuDbmSys" />
    <field id="DbsUsr" alias="DbsUsr" />
    <field id="DbsPwd" alias="DbsPwd" />
    <field id="Drv" alias="Drv" />
    <field id="Drv" alias="DrvTxt" translate="DrvTyp" />
    <field id="Act" alias="Act" />
    <field id="Act" alias="ActTxt" translate="Es1Es0" />
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[ActTxt]" alias="label" />
    </compound>
    <where>
      <and>
        <filter left-field="IdeDbs" condition="eq" right-variable="CrtAls" optional="true" />
        <filter left-field="Dct" condition="like" right-variable="CrtDct" optional="true" />
        <filter left-field="Typ" condition="like" right-variable="CrtTyp" optional="true" />
        <filter left-field="Act" condition="eq" right-variable="CrtAct" optional="true" />
      </and>
    </where>
    <variable id="CrtAls" type="INTEGER" name="CrtAls" />
    <variable id="CrtDct" type="STRINGB" name="CrtDct" />
    <variable id="CrtTyp" type="STRINGB" name="CrtTyp" />
    <variable id="CrtAct" type="INTEGER" name="CrtAct" />
  </query>

  <!-- LIST SITES AND MODULES BY DATA BASE -->
  <query id="QryLstSitModByDbs">
    <table id="AweSitModDbs" alias="sitModDbs" />
    <field id="IdeSitModDbs" table="sitModDbs" alias="IdeSitModDbs" />
    <field id="IdeSit" table="sitModDbs" alias="IdeSit" />
    <field id="Nam" table="sit" alias="Sit" />
    <field id="IdeMod" table="sitModDbs" alias="IdeMod" />
    <field id="Nam" table="mod" alias="Mod" />
    <field id="Ord" table="sitModDbs" alias="Ord" />
    <join>
      <table id="AweSit" alias="sit" />
      <and>
        <filter left-field="IdeSit" left-table="sitModDbs" condition="eq" right-field="IdeSit" right-table="sit" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="sitModDbs" condition="eq" right-field="IdeMod" right-table="mod" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeDbs" left-table="sitModDbs" condition="eq" right-variable="IdeDbs" />
      </and>
    </where>
    <variable id="IdeDbs" type="INTEGER" name="IdeDbs" />
  </query>

  <!-- SITE LIST -->
  <query id="SitLst" cacheable="true">
    <table id="AweSit" alias="sit" />
    <field id="IdeSit" table="sit" alias="id" />
    <field id="IdeSit" table="sit" alias="IdeSit" />
    <field id="Nam" table="sit" alias="Nam" />
    <field id="Ord" table="sit" alias="Ord" />
    <field id="Act" table="sit" alias="Act"/>
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Act]" alias="label" translate="Es1Es0"/>
    </compound>
    <where>
      <and>
        <filter left-field="IdeSit" left-table="sit" condition="eq" right-variable="site" optional="true" />
        <filter left-field="Act" left-table="sit" condition="eq" right-variable="status" optional="true" />
      </and>
    </where>
    <variable id="site" type="INTEGER" name="CrtSit" />
    <variable id="status" type="INTEGER" name="CrtSta" />
  </query>

  <!-- Site check Name Unique -->
  <query id="SitNamUni">
    <table id="AweSit" />
    <field id="Nam" alias="Nam" />
    <where>
      <and>
        <filter left-field="Nam" condition="eq" right-variable="Nam" trim="true" />
      </and>
    </where>
    <variable id="Nam" type="STRING" name="Nam" />
  </query>

  <!-- SITES SUGGEST -->
  <query id="SitSug" cacheable="true">
    <table id="AweSit" />
    <field id="IdeSit" alias="value" />
    <field id="Nam" alias="name" noprint="true"/>
    <computed format="[name]" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
        <or>
          <filter left-field="IdeSit" condition="eq" right-variable="key" optional="true"/>
          <filter left-field="Nam" condition="like" right-variable="suggest" ignorecase="true" />
        </or>
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="key" type="INTEGER" name="suggest" />
    <variable id="suggest" type="STRINGB" name="suggest" />
  </query>

  <!-- SITE SELECT -->
  <query id="SitSel" cacheable="true">
    <table id="AweSit" />
    <field id="IdeSit" alias="value" />
    <field id="Nam" alias="Nam" />
    <field id="Ord" alias="Ord" />
    <computed format="[Nam]" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <order-by field="Ord" type="ASC" />
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- LIST MODULES AND DATABASES BY SITE -->
  <query id="QryLstModDbsBySit">
    <table id="AweSitModDbs" alias="sitModDbs" />
    <field id="IdeSitModDbs" table="sitModDbs" alias="IdeSitModDbs" />
    <field id="IdeMod" table="sitModDbs" alias="IdeMod" />
    <field id="Nam" table="mod" alias="Mod" />
    <field id="IdeDbs" table="sitModDbs" alias="IdeDbs" />
    <field id="Als" table="dbs" alias="Als" />
    <field id="Ord" table="sitModDbs" alias="Ord" />
    <join>
      <table id="AweDbs" alias="dbs" />
      <and>
        <filter left-field="IdeDbs" left-table="sitModDbs" condition="eq" right-field="IdeDbs" right-table="dbs" />
      </and>
    </join>
    <join>
      <table id="AweMod" alias="mod" />
      <and>
        <filter left-field="IdeMod" left-table="sitModDbs" condition="eq" right-field="IdeMod" right-table="mod" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeSit" left-table="sitModDbs" condition="eq" right-variable="IdeSit" />
      </and>
    </where>
    <variable id="IdeSit" type="INTEGER" name="IdeSit" />
  </query>

  <!-- LIST SITES AND DATABASES BY MODULE -->
  <query id="QryLstSitDbsByMod">
    <table id="AweSitModDbs" alias="sitModDbs" />
    <field id="IdeSitModDbs" table="sitModDbs" alias="IdeSitModDbs" />
    <field id="IdeSit" table="sitModDbs" alias="IdeSit" />
    <field id="Nam" table="sit" alias="SitNam" />
    <field id="IdeDbs" table="sitModDbs" alias="IdeDbs" />
    <field id="Des" table="dbs" alias="DbsDes" />
    <field id="Als" table="dbs" alias="DbsAls" />
    <field id="Ord" table="sitModDbs" alias="SitModOrd" />
    <join>
      <table id="AweDbs" alias="dbs" />
      <and>
        <filter left-field="IdeDbs" left-table="sitModDbs" condition="eq" right-field="IdeDbs" right-table="dbs" />
      </and>
    </join>
    <join>
      <table id="AweSit" alias="sit" />
      <and>
        <filter left-field="IdeSit" left-table="sitModDbs" condition="eq" right-field="IdeSit" right-table="sit" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeMod" left-table="sitModDbs" condition="eq" right-variable="IdeMod" />
      </and>
    </where>
    <variable id="IdeMod" type="INTEGER" name="IdeMod" />
  </query>

  <!-- DataBase Alias check unique -->
  <query id="DbsAlsUni">
    <table id="AweDbs" />
    <field id="Als" alias="Als" />
    <where>
      <and>
        <filter left-field="Als" condition="eq" right-variable="Als" trim="true" />
      </and>
    </where>
    <variable id="Als" type="STRING" name="Als" />
  </query>

  <!-- USER EMAIL ADDRESS -->
  <query id="GrpUsrLst" distinct="true" cacheable="true">
    <table id="GutEmlGrp" alias="Grp" />
    <table id="ope" />
    <field id="Usr" table="Grp" alias="value" />
    <field id="EmlAdr" table="ope" alias="Eml" />
    <computed format="[value] ([Eml])" alias="label" />
    <where>
      <and>
        <filter left-field="Grp" left-table="Grp" condition="eq" right-variable="Grp" ignorecase="true" />
        <filter left-field="l1_nom" left-table="ope" condition="eq" right-field="Usr" right-table="Grp" trim="true" />
      </and>
    </where>
    <variable id="Grp" type="STRING" name="Grp" />
  </query>

  <!-- USER EMAIL LIST -->
  <query id="UsrEml" distinct="true" cacheable="true">
    <table id="ope" />
    <field id="EmlAdr" alias="value" />
    <field id="EmlAdr" alias="label" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" trim="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" name="Usr" />
  </query>

  <!-- AWE UNIQUE KEYS -->
  <query id="AweKeySug" distinct="true" cacheable="true">
    <table id="AweKey" />
    <field id="KeyNam" alias="value" />
    <field id="KeyNam" alias="label" />
    <where>
      <and>
        <filter left-field="KeyNam" condition="like" right-variable="Key" ignorecase="true" />
      </and>
    </where>
    <variable id="Key" type="STRINGB" name="suggest" />
    <order-by field="KeyNam" type="ASC" />
  </query>

  <query id="AweKeyLst" distinct="true">
    <table id="AweKey" alias="AweKey" />
    <field id="KeyNam" alias="id" />
    <field id="KeyNam" alias="KeyNam" />
    <field id="KeyVal" alias="KeyVal" />
    <field id="Act" alias="Act" />
    <where>
      <and>
        <filter left-field="KeyNam" left-table="AweKey" condition="like" right-variable="key" optional="true" />
        <filter left-field="Act" left-table="AweKey" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="key" type="STRINGB" name="CrtKeyNam" />
    <variable id="active" type="INTEGER" name="CrtSta" />
  </query>

  <!-- AweKey KeyNam check unique -->
  <query id="AweKeyUni">
    <table id="AweKey" />
    <field id="KeyNam" alias="KeyNam" />
    <where>
      <and>
        <filter left-field="KeyNam" condition="eq" right-variable="KeyNam" trim="true" />
      </and>
    </where>
    <variable id="KeyNam" type="STRING" name="KeyNam.selected" />
  </query>

  <!-- Application parameter list -->
  <query id="AweAppParLst" distinct="true">
    <table id="AweAppPar" alias="AweAppPar" />
    <field id="IdeAweAppPar" alias="id" />
    <field id="IdeAweAppPar" alias="IdeAweAppPar" />
    <field id="ParNam" alias="ParNam" />
    <field id="ParVal" alias="ParVal" />
    <field id="Cat" alias="Cat" />
    <field id="Des" alias="Des" />
    <field id="Act" alias="Act" />
    <where>
      <and>
        <filter left-field="ParNam" left-table="AweAppPar" condition="like" right-variable="ParNam" optional="true" />
        <filter left-field="Cat" left-table="AweAppPar" condition="eq" right-variable="Cat" optional="true" />
        <filter left-field="Act" left-table="AweAppPar" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="ParNam" type="STRING" name="CrtParNam" />
    <variable id="Cat" type="STRING" name="CrtCat" />
    <variable id="active" type="INTEGER" name="CrtSta" />
  </query>

  <!-- Application parameter check unique -->
  <query id="AweAppParUni">
    <table id="AweAppPar" />
    <field id="ParNam" alias="ParNam" />
    <where>
      <and>
        <filter left-field="ParNam" condition="eq" right-variable="ParNam" trim="true" />
      </and>
    </where>
    <variable id="ParNam" type="STRING" name="ParNam.selected" />
  </query>

  <!-- GET Application parameter SUGGEST -->
  <query id="AweAppParSug" distinct="true" cacheable="true">
    <table id="AweAppPar" />
    <field id="ParNam" alias="value" />
    <field id="ParNam" alias="label" />
    <where>
      <and>
        <filter left-field="ParNam" condition="like" right-variable="Nam" ignorecase="true" />
      </and>
    </where>
    <variable id="Nam" type="STRINGB" name="suggest" />
    <order-by field="ParNam" type="ASC" />
  </query>

  <!-- GET SESSION USER DATA -->
  <query id="SesUsr" cacheable="true">
    <table id="ope" />
    <field id="OpeNam" alias="SesNam" />
    <field id="EmlAdr" alias="SesEma" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" ignorecase="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <!-- GET CONNECTED USER -->
  <query id="connectedUser" cacheable="true">
    <table id="ope" />
    <field id="l1_nom" alias="value" />
    <field id="OpeNam" alias="name" />
    <computed format="[name] ([value])" alias="label" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="eq" right-variable="Usr" ignorecase="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <query id="GetEmaLst" cacheable="true">
    <table id="ope" />
    <field id="OpeNam" alias="UsrNam" />
    <field id="EmlAdr" alias="UsrEml" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="in" right-variable="UsrLst" trim="true" />
      </and>
    </where>
    <variable id="UsrLst" type="STRING" name="UsrPrn" />
  </query>

  <query id="ProAllLst" distinct="true" cacheable="true">
    <table id="AwePro" />
    <field id="Nam" alias="value" />
    <field id="Nam" alias="label" />
    <order-by field="Nam" type="ASC" />
  </query>

  <!-- GET THE PRINTER DEFINED FOR THE USER -->
  <query id="GetUsrPrn">
    <table id="ope" />
    <field id="PcPrn" alias="PcPrn" />
    <field id="WebPrn" alias="WebPrn" />
    <where>
      <and>
        <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="Usr" ignorecase="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <!-- GET THE EMAIL LIST OF ACTIVE USERS -->
  <query id="GetActUsrEmaLst">
    <table id="ope" />
    <field id="l1_nom" alias="UsrNam" />
    <field id="EmlAdr" alias="UsrEml" />
    <where>
      <and>
        <filter left-field="l1_act" condition="eq" right-variable="active" />
        <filter left-field="EmlAdr" condition="is not null" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- GET THE EMAIL LIST OF CONNECTED USERS -->
  <query id="GetConUsrEmaLst">
    <table id="ope" />
    <field id="l1_nom" alias="UsrNam" />
    <field id="EmlAdr" alias="UsrEml" />
    <where>
      <and>
        <filter left-field="l1_con" condition="eq" right-variable="Con" />
        <filter left-field="EmlAdr" condition="is not null" />
      </and>
    </where>
    <variable id="Con" type="INTEGER" value="1" />
  </query>

  <!-- Enumerated Application parameter category -->
  <query id="CatParTyp" enumerated="CatParTyp">
    <field id="value" />
    <field id="label" />
  </query>

  <!-- Enumerated YES:1|NO:0 -->
  <query id="Es1Es0" enumerated="Es1Es0">
    <field id="value" />
    <field id="label" />
  </query>

  <!-- Enumerated YES:Y|NO:N -->
  <query id="EsyEnn" enumerated="EsyEnn">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="ResAccModSel" enumerated="ResAccModSel">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="ShwPrn" service="ShwPrn">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="Lan" enumerated="Lan">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="PrnActAll" enumerated="PrnAct" cacheable="true">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="PrnActNotPrn" enumerated="PrnActNotPrn" cacheable="true">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="PrnAct" service="PrnAct">
    <field id="value" />
    <field id="label" />
  </query>

  <query id="GetPrnLst" service="GetPrnLst">
    <field id="printer" alias="value"/>
    <field id="printer" alias="label"/>
  </query>

  <query id="GetUsrTotCol">
    <field id="red" alias="red" />
    <field id="green" alias="green" />
    <field id="blue" alias="blue" />
    <table id="Color" />
    <computed alias="ColTot" format="[red]-[green]-[blue]" />
    <where>
      <and>
        <filter left-field="type" condition="eq" right-variable="Typ" />
        <filter left-field="usr" condition="eq" right-variable="Usr" ignorecase="true"/>
      </and>
    </where>
    <variable id="Typ" type="STRING" value="PrnTxtTot" />
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <query id="GetUsrTotBkg">
    <field id="red" alias="red" />
    <field id="green" alias="green" />
    <field id="blue" alias="blue" />
    <table id="Color" />
    <computed alias="BkgTot" format="[red]-[green]-[blue]" />
    <where>
      <and>
        <filter left-field="type" condition="eq" right-variable="Typ" />
        <filter left-field="usr" condition="eq" right-variable="Usr" ignorecase="true"/>
      </and>
    </where>
    <variable id="Typ" type="STRING" value="PrnBkgTot" />
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <query id="GetUsrSubCol">
    <field id="red" alias="red" />
    <field id="green" alias="green" />
    <field id="blue" alias="blue" />
    <table id="Color" />
    <computed alias="ColSub" format="[red]-[green]-[blue]" />
    <where>
      <and>
        <filter left-field="type" condition="eq" right-variable="Typ" />
        <filter left-field="usr" condition="eq" right-variable="Usr" ignorecase="true"/>
      </and>
    </where>
    <variable id="Typ" type="STRING" value="PrnTxt4" />
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <query id="GetUsrSubBkg">
    <field id="red" alias="red" />
    <field id="green" alias="green" />
    <field id="blue" alias="blue" />
    <table id="Color" />
    <computed alias="BkgSub" format="[red]-[green]-[blue]" />
    <where>
      <and>
        <filter left-field="type" condition="eq" right-variable="Typ" />
        <filter left-field="usr" condition="eq" right-variable="Usr" ignorecase="true"/>
      </and>
    </where>
    <variable id="Typ" type="STRING" value="PrnBkg4" />
    <variable id="Usr" type="STRING" session="user" />
  </query>

  <!-- Encrypt text (Service encryptText) -->
  <query id="GetEncTxt" service="SerEncTxt" cacheable="true">
    <field id="encoded" alias="value"/>
    <field id="encoded" alias="label" />
    <variable id="text" type="STRING" name="CrtTxt" />
    <variable id="phraseKey" type="STRING" name="CrtPhr" />
  </query>

  <!-- Encrypt property text (Service encryptText) -->
  <query id="GetEncPpt" service="SerEncPpt" cacheable="true">
    <field id="encoded" alias="value"/>
    <field id="encoded" alias="label" />
    <variable id="text" type="STRING" name="CrtTxt" />
    <variable id="phraseKey" type="STRING" name="CrtPhr" />
  </query>

  <query id="StlLst" enumerated="StlTyp" distinct="false" public="false" cacheable="true">
    <field id="value" />
    <field id="label" />
    <variable id="style" type="STRING" name="suggest" />
  </query>
  <query id="FntLst" enumerated="FntLst" distinct="false" public="false" cacheable="false">
    <field id="label" />
    <field id="value" />
  </query>

  <!-- Get Generated Report List -->
  <query id="RepGenPdfLst" service="RepGenPdfLst">
    <field id="SrvAct" />
    <field id="Fil" />
    <field id="Nam" />
    <field id="Dat" />
    <order-by field="Dat" type="DESC" />
  </query>

  <!-- Get Style config for Jasper reports-->
  <query id="UsrStlLst" distinct="false" public="false" cacheable="false">
    <table id="AweStlCnf" alias="stlCnf" />
    <field id="IdeAweStlCnf" table="stlCnf" alias="id" />
    <field id="IdeAweStlCnf" table="stlCnf" alias="IdeAweStlCnf" />
    <field id="IdeOpe" table="stlCnf" alias="IdeOpe" />
    <field id="IdePro" table="stlCnf" alias="IdePro" />
    <field id="Stl" table="stlCnf" alias="Stl" />
    <field id="Fnt" table="stlCnf" alias="Fnt" />
    <field id="FntSiz" table="stlCnf" alias="FntSiz" />
    <field id="BckCol" table="stlCnf" alias="BckCol" />
    <field id="TxtCol" table="stlCnf" alias="TxtCol" />
    <field id="Act" table="stlCnf" alias="Act" />
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="stlCnf" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="stlCnf" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Stl" left-table="stlCnf" condition="eq" right-variable="Stl" optional="true" />
        <filter left-field="Act" left-table="stlCnf" condition="eq" right-variable="active" optional="true" />
        <or>
          <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="OpeNam" ignorecase="true"/>
          <filter left-field="Nam" left-table="pro" condition="eq" right-variable="ProNam" ignorecase="true"/>
        </or>
      </and>
    </where>
    <variable id="Stl" type="STRING" name="CrtStl" />
    <variable id="OpeNam" type="STRING" session="user" />
    <variable id="ProNam" type="STRING" session="profile" />
    <variable id="active" type="INTEGER" name="CrtAct" />
  </query>

  <!-- Get Style config Screen -->
  <query id="UsrStlLstScr" distinct="false" public="false" cacheable="false">
    <table id="AweStlCnf" alias="stlCnf" />
    <field id="IdeAweStlCnf" table="stlCnf" alias="IdeAweStlCnf" />
    <field id="IdeOpe" table="stlCnf" alias="IdeOpe" />
    <field id="IdePro" table="stlCnf" alias="IdePro" />
    <field id="Stl" table="stlCnf" alias="Stl" />
    <field id="Fnt" table="stlCnf" alias="Fnt" />
    <field id="FntSiz" table="stlCnf" alias="FntSiz" />
    <field id="BckCol" table="stlCnf" alias="BckCol" />
    <field id="TxtCol" table="stlCnf" alias="TxtCol" />
    <field id="Act" table="stlCnf" alias="Act" />
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="stlCnf" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="stlCnf" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Stl" left-table="stlCnf" condition="eq" right-variable="Stl" ignorecase="false" trim="false" optional="true" />
        <filter left-field="IdeOpe" left-table="Ope" condition="eq" right-variable="IdeOpe" ignorecase="true" trim="false" optional="true" />
        <filter left-field="IdePro" left-table="pro" condition="eq" right-variable="IdePro" ignorecase="true" trim="false" optional="true" />
        <filter left-field="Act" left-table="stlCnf" condition="eq" right-variable="active" ignorecase="false" trim="false" optional="true" />
      </and>
    </where>
    <variable id="Stl" type="STRING" name="CrtStl" />
    <variable id="IdeOpe" type="INTEGER" name="CrtUsr" />
    <variable id="IdePro" type="INTEGER" name="CrtPro" />
    <variable id="active" type="INTEGER" name="CrtAct" />
  </query>

  <!-- GET STYLE CONFIGURATION TO SINGLETON-->
  <query id="GetStlCfg">
    <table id="AweStlCnf" alias="StlCnf" />
    <field id="IdeAweStlCnf" table="StlCnf" alias="IdeStlCnf" />
    <field id="l1_nom" table="ope" alias="UsrNam" />
    <field id="Acr" table="pro" alias="Acr" />
    <field id="Stl" table="StlCnf" alias="Stl" />
    <field id="Fnt" table="StlCnf" alias="Fnt" />
    <field id="FntSiz" table="StlCnf" alias="FntSiz" />
    <field id="BckCol" table="StlCnf" alias="BckCol" />
    <field id="TxtCol" table="StlCnf" alias="TxtCol" />
    <join type="LEFT">
      <table id="AwePro" alias="pro" />
      <and>
        <filter left-field="IdePro" left-table="StlCnf" condition="eq" right-field="IdePro" right-table="pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="IdeOpe" left-table="StlCnf" condition="eq" right-field="IdeOpe" right-table="ope" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Act" left-table="StlCnf" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <!-- EMAIL SERVER -->
  <query id="EmlSrvLst" cacheable="false">
    <table id="AweEmlSrv" alias="EmlSrv" />
    <field id="IdeAweEmlSrv" alias="id" />
    <field id="IdeAweEmlSrv" alias="IdeAweEmlSrv" />
    <field id="SrvNam" alias="SrvNam" />
    <field id="Hst" alias="Hst" />
    <field id="Ath" alias="Ath" />
    <compound alias="AthIco">
      <computed format="AUTHENTICATION_STATUS_[Ath]" alias="icon" />
      <computed format="[Ath]" alias="label" translate="Es1Es0" />
    </compound>
    <field id="EmlUsr" alias="EmlUsr" />
    <field id="EmlPwd" alias="EmlPwd" />
    <field id="Act" alias="Act" />
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Act]" alias="label" translate="Es1Es0" />
    </compound>
    <where>
      <and>
        <filter left-field="SrvNam" condition="like" right-variable="SrvNam" optional="true" />
        <filter left-field="Hst" condition="like" right-variable="Hst" optional="true" />
        <filter left-field="Ath" condition="eq" right-variable="Ath" optional="true" />
        <filter left-field="Act" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="SrvNam" type="STRINGN" name="CrtNam" />
    <variable id="Hst" type="STRINGN" name="CrtSrv" />
    <variable id="Ath" type="INTEGER" name="CrtAth" />
    <variable id="active" type="INTEGER" name="CrtAct" />
    <order-by field="Act" type="ASC" />
  </query>

  <!-- EMAIL SERVER (SUGGEST SERVER ALIAS)-->
  <query id="EmlSrvNamSug">
    <table id="AweEmlSrv" />
    <field id="SrvNam" alias="value" />
    <field id="Hst" alias="hst" />
    <computed format="[value] ([hst])" alias="label" />
    <where>
      <and>
        <filter left-field="SrvNam" condition="like" right-variable="SrvNam" ignorecase="true" />
      </and>
    </where>
    <variable id="SrvNam" type="STRINGB" name="suggest" />
  </query>

  <!-- EMAIL SERVER (SUGGEST SERVER HOST)-->
  <query id="EmlSrvSug">
    <table id="AweEmlSrv" />
    <field id="Hst" alias="value" />
    <field id="SrvNam" alias="Nam" />
    <computed format="[value] ([Nam])" alias="label" />
    <where>
      <and>
        <filter left-field="Hst" condition="like" right-variable="Hst" ignorecase="true" />
      </and>
    </where>
    <variable id="Hst" type="STRINGB" name="suggest" />
  </query>

  <!-- Email Server Alias check Unique -->
  <query id="EmlSrvNamUni">
    <table id="AweEmlSrv" />
    <field id="SrvNam" alias="SrvNam" />
    <where>
      <and>
        <filter left-field="SrvNam" condition="eq" right-variable="SrvNam" trim="true" />
      </and>
    </where>
    <variable id="SrvNam" type="STRING" name="SrvNam" />
  </query>

  <!-- Email server (select list alias) -->
  <query id="SelEmlSrvNom">
    <table id="AweEmlSrv" />
    <field id="SrvNam" alias="value" />
    <field id="SrvNam" alias="label" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <order-by field="SrvNam" type="ASC" />
  </query>

  <!-- Email server (Get info by alias -->
  <query id="GetEmlSrvByOpe" public="true">
    <table id="AweEmlSrv" alias="EmlSrv" />
    <field id="Hst" alias="Hst" />
    <field id="Ath" alias="Ath" />
    <field id="EmlUsr" alias="EmlUsr" />
    <field id="EmlPwd" alias="EmlPwd" />
    <join>
      <table id="ope" alias="ope" />
      <and>
        <filter left-field="SrvNam" left-table="EmlSrv" condition="eq" right-field="EmlSrv" right-table="ope" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="l1_nom" left-table="ope" condition="eq" right-variable="Usr" trim="true" />
      </and>
    </where>
    <variable id="Usr" type="STRING" name="Usr" />
  </query>

  <!-- JMS QUEUES -->
  <query id="JmsConnections" public="true">
    <table id="AweQue" />
    <field id="IdeAweQue" alias="IdeAweQue" />
    <field id="Als" alias="Als" />
    <field id="Des" alias="Des" />
    <field id="QueTyp" alias="QueTyp" />
    <field id="ConTyp" alias="ConTyp" />
    <field id="JmsBrk" alias="JmsBrk" />
    <field id="JmsUsr" alias="JmsUsr" />
    <field id="JmsPwd" alias="JmsPwd"/>
    <field id="DstNam" alias="DstNam" />
    <field id="Act" alias="Act" />
    <where>
      <and>
        <filter left-field="Act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
  </query>

  <query id="QueLst">
    <table id="AweQue" />
    <field id="IdeAweQue" alias="id" />
    <field id="IdeAweQue" alias="IdeAweQue" />
    <field id="Als" alias="Als" />
    <field id="Des" alias="Des" />
    <field id="QueTyp" alias="QueTyp" />
    <field id="ConTyp" alias="ConTyp" />
    <field id="ConTyp" alias="ConTypTrans" translate="EnuQueConTyp" />
    <field id="JmsBrk" alias="JmsBrk" />
    <field id="JmsUsr" alias="JmsUsr" />
    <field id="JmsPwd" alias="JmsPwd" />
    <field id="DstNam" alias="DstNam" />
    <field id="Act" alias="Act" />
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Act]" alias="label" />
    </compound>
    <where>
      <and>
        <filter left-field="Als" condition="like" right-variable="CrtAls" optional="true" />
        <filter left-field="QueTyp" condition="like" right-variable="CrtTypQue" optional="true" />
        <filter left-field="DstNam" condition="like" right-variable="CrtQue" optional="true" />
        <filter left-field="JmsBrk" condition="like" right-variable="CrtBrk" optional="true" />
        <filter left-field="Act" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="CrtAls" type="STRINGN" name="CrtAls" optional="true" />
    <variable id="CrtTypQue" type="STRINGN" name="CrtTypQue" optional="true" />
    <variable id="CrtQue" type="STRINGN" name="CrtQue" optional="true" />
    <variable id="CrtBrk" type="STRINGN" name="CrtBrk" optional="true" />
    <variable id="active" type="INTEGER" name="CrtAct" optional="true" />
    <order-by field="Act" type="ASC" />
  </query>

  <query id="AlsJmsSug">
    <table id="AweQue" />
    <field id="Als" alias="value" />
    <field id="Als" alias="label" />
    <where>
      <and>
        <filter left-field="Als" condition="like" right-variable="CrtAls" ignorecase="true" />
      </and>
    </where>
    <variable id="CrtAls" type="STRINGB" name="suggest" />
  </query>

  <query id="QueNamSug">
    <table id="AweQue" />
    <field id="DstNam" alias="value" />
    <field id="DstNam" alias="label" />
    <where>
      <and>
        <filter left-field="DstNam" condition="like" right-variable="CrtQue" ignorecase="true" />
      </and>
    </where>
    <variable id="CrtQue" type="STRINGB" name="suggest" />
  </query>

  <query id="JmsBrkSug" distinct="true">
    <table id="AweQue" />
    <field id="JmsBrk" alias="value" />
    <field id="JmsBrk" alias="label" />
    <where>
      <and>
        <filter left-field="JmsBrk" condition="like" right-variable="CrtBrk" ignorecase="true" />
      </and>
    </where>
    <variable id="CrtBrk" type="STRINGB" name="suggest" />
  </query>

  <!-- Queue Alias check Unique -->
  <query id="QueAlsUni">
    <table id="AweQue" />
    <field id="Als" alias="Als" />
    <where>
      <and>
        <filter left-field="Als" condition="eq" right-variable="Als" trim="true" />
      </and>
    </where>
    <variable id="Als" type="STRING" name="Als" />
  </query>

  <!-- USER EMAIL ADDRESS -->
  <query id="UsrEmlLst" distinct="true" cacheable="true">
    <table id="ope" />
    <field id="l1_nom" alias="value" />
    <field id="EmlAdr" alias="Eml" noprint="true"/>
    <computed format="[value] ([Eml])" alias="label" />
    <where>
      <and>
        <filter left-field="EmlAdr" condition="is not null" />
      </and>
    </where>
  </query>

  <!-- GET THE EMAIL LIST OF ACTIVE USERS (-->
  <query id="ActUsrEmlSug">
    <table id="ope" />
    <field id="l1_nom" alias="value" />
    <field id="EmlAdr" alias="Eml" noprint="true"/>
    <computed format="[value] ([Eml])" alias="label" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="like" right-variable="User" ignorecase="true"  optional="true"/>
        <filter left-field="l1_act" condition="eq" right-variable="active" />
        <filter left-field="EmlAdr" condition="is not null" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1"/>
    <variable id="User" type="STRINGB" name="suggest"/>
  </query>

  <!-- GET THE EMAIL LIST OF ACTIVE USERS -->
  <query id="SchActUsrEmlSug">
    <table id="ope" />
    <field id="EmlAdr" alias="value" />
    <field id="l1_nom" alias="Usr" noprint="true"/>
    <computed format="([Usr]) [value] " alias="label" />
    <where>
      <and>
        <or>
          <filter left-field="l1_nom" condition="like" right-variable="UserB"/>
          <filter left-field="EmlAdr" condition="like" right-variable="UserB"/>
        </or>
        <filter left-field="EmlAdr" condition="is not null"/>
        <filter left-field="l1_act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="UserB" type="STRINGB" name="suggest"/>
  </query>

  <!-- GET THE EMAIL VALUE AND LABEL FROM ARRAYNODE -->
  <query id="GetEmaFrmArr">
    <table id="ope" />
    <field id="EmlAdr" alias="value"/>
    <field id="l1_nom" alias="Usr" noprint="true"/>
    <computed format="([Usr]) [value] " alias="label" />
    <where>
      <and>
        <filter left-field="EmlAdr" condition="in" right-variable="emailList" ignorecase="true" optional="true"/>
        <filter left-field="EmlAdr" condition="is not null"/>
      </and>
    </where>
    <variable id="emailList" type="STRING" name="RepEmaDst" />
  </query>

  <!-- GET THE EMAIL LIST OF ACTIVE USERS -->
  <query id="SchActUsrSug">
    <table id="ope" />
    <field id="l1_nom" alias="value" />
    <field id="EmlAdr" alias="Eml" noprint="true"/>
    <computed format="[value] ([Eml])" alias="label" />
    <where>
      <and>
        <or>
          <filter left-field="l1_nom" condition="like" right-variable="UserB"/>
          <filter left-field="EmlAdr" condition="like" right-variable="UserB"/>
        </or>
        <filter left-field="l1_nom" condition="is not null"/>
        <filter left-field="l1_act" condition="eq" right-variable="active" />
      </and>
    </where>
    <variable id="active" type="INTEGER" value="1" />
    <variable id="UserB" type="STRINGB" name="suggest"/>
  </query>

  <!-- GET THE EMAIL VALUE AND LABEL FROM ARRAYNODE -->
  <query id="GetUsrFrmArr">
    <table id="ope" />
    <field id="l1_nom" alias="value" />
    <field id="EmlAdr" alias="email" noprint="true" />
    <computed format="([value]) [email] " alias="label" />
    <where>
      <and>
        <filter left-field="l1_nom" condition="in" right-variable="Users"  ignorecase="true" optional="true"/>
        <filter left-field="l1_nom" condition="is not null"/>
      </and>
    </where>
    <variable id="Users" type="STRING" name="RepUsrDst" />
  </query>

  <!-- USER DATA -->
  <query id="UsrUpd" cacheable="true">
    <table id="ope" alias="ope" />
    <field id="IdeOpe" table="ope" alias="IdeOpe" />
    <field id="l1_nom" table="ope" alias="Nom" />
    <field id="Nam" table="Pro" alias="Pro" />
    <field id="Nam" table="thm" alias="Thm" />
    <field id="ScrIni" table="ope" alias="ScrIni" />
    <field id="Res" table="ope" alias="Res" />
    <field id="l1_act" table="ope" alias="Sta" />
    <field id="PcPrn" table="ope" alias="Prn" />
    <field id="WebPrn" table="ope" alias="WebPrn" />
    <field id="EmlAdr" table="ope" alias="Eml" />
    <field id="EmlSrv" table="ope" alias="EmlSrv" />
    <field id="l1_lan" table="ope" alias="Lan" />
    <field id="l1_lan" table="ope" alias="LanTxt" translate="LanUsr" />
    <field id="l1_act" table="ope" alias="StaTxt" translate="Es1Es0" />
    <field id="PwdLck" table="ope" alias="PwdLck" />
    <compound alias="BlkIco">
      <computed format="AUTHENTICATION_STATUS_[PwdLck]" alias="icon"/>
      <computed format="[PwdLck]" alias="label" translate="Es1Es0"/>
      <computed format="[PwdLck]" alias="value"/>
    </compound>
    <compound alias="StaIco">
      <computed format="'[Sta]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Sta]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Sta]" alias="label" translate="Es1Es0"/>
      <computed format="[Sta]" alias="value"/>
    </compound>
    <field id="OpeNam" table="ope" alias="Nam" />
    <join>
      <table id="AwePro" alias="Pro" />
      <and>
        <filter left-field="IdePro" left-table="ope" condition="eq" right-field="IdePro" right-table="Pro" />
      </and>
    </join>
    <join type="LEFT">
      <table id="AweThm" alias="thm" />
      <and>
        <filter left-field="IdeThm" left-table="ope" condition="eq" right-field="IdeThm" right-table="thm" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdeOpe" left-table="ope" condition="in" right-variable="Usr" />
      </and>
    </where>
    <variable id="Usr" type="INTEGER" name="IdeOpe" />
  </query>

  <!-- User Manual of App -->
  <query id="getUsrHlpPth" service="getUsrHlpPth">
    <field id="Pth" />
    <field id="Nam" />
  </query>

  <!--
  SCHEDULER QUERIES
  -->
  <query id="SchTskSug" cacheable="true">
    <!-- Scheduler task suggest -->
    <table id="AweSchTsk"/>
    <field id="Ide" alias="value"/>
    <field id="Nam" alias="label"/>
    <where>
      <and>
        <filter left-field="Nam" condition="like" right-variable="suggest"/>
      </and>
    </where>
    <variable id="suggest" type="STRINGB" name="suggest"/>
  </query>

  <!-- Mantain suggest -->
  <query id="getPublicMaintainList" service="getMaintainList" cacheable="true">
    <field id="Ide" alias="value"/>
    <computed alias="label" format="[value]"/>
    <variable id="maintainKey" type="STRINGB" name="suggest"/>
    <variable id="isPublic" type="BOOLEAN" name="isPublic" value="true" />
  </query>

  <!-- Scheduler task list -->
  <query id="SchTskLst" service="getSchedulerTaskList">
    <field id="Ide" alias="id"/>
    <field id="Ide" alias="IdeTsk"/>
    <field id="Nam" alias="Nam"/>
    <field id="TypLch" alias="TypLch"/>
    <field id="Sta" alias="Sta"/>
    <field id="Act" alias="Act"/>
    <field id="LstTim" alias="LstTim"/>
    <field id="NxtTim" alias="NxtTim"/>
    <field id="AvgTim" alias="AvgTim"/>
    <field id="Prg" alias="Prg"/>
    <compound alias="LchIco">
      <computed format="'[TypLch]' == '0' ? 'fa-hand-paper-o' : '[TypLch]' == '1' ? 'fa-calendar' : 'fa-file'" alias="icon" eval="true"/>
      <computed format="text-info" alias="style"/>
      <computed format="[TypLch]" alias="value" />
      <computed format="[TypLch]" alias="label" translate="LchTyp"/>
    </compound>
    <compound alias="StaIco">
      <computed format="'[Sta]' == '0' ? 'fa-check' : '[Sta]' == '1' ? 'fa-times' : '[Sta]' == '2' ? 'fa-exclamation-triangle' : '[Sta]' == '3' ? 'fa-pause' : '[Sta]' == '4' ? 'fa-refresh' : '[Sta]' == '5' ? 'fa-hourglass' : 'fa-chain-broken'" alias="icon" eval="true"/>
      <computed format="'[Sta]' == '0' ? 'text-success' : '[Sta]' == '1' ? 'text-danger' : '[Sta]' == '2' ? 'text-warning' : '[Sta]' == '3' ? 'text-danger' : '[Sta]' == '4' ? 'fa-spin text-info' : '[Sta]' == '5' ? 'text-light-gray' : 'text-info'" alias="style" eval="true"/>
      <computed format="[Sta]" alias="value" />
      <computed format="[Sta]" alias="label" translate="StaTyp"/>
    </compound>
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Act]" alias="value" />
      <computed format="[Act]" alias="label" translate="Es1Es0"/>
    </compound>
  </query>

  <!-- Scheduler task list query for task load service (Java) -->
  <query id="javaSchedulerTaskList" public="true">
    <table id="AweSchTsk" alias="Tsk"/>
    <!--Configuration tab elements-->
    <field id="Ide" alias="Ide" table="Tsk"/>
    <field id="Nam" alias="Nam" table="Tsk"/>
    <field id="Act" alias="Act" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="Des" alias="Des" table="Tsk"/>
    <field id="NumStoExe" alias="NumStoExe" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="TimOutExe" alias="TimOutExe" table="Tsk"/>
    <field id="TypExe" alias="TypExe" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="IdeSrvExe" alias="IdeSrvExe" table="Tsk"/>
    <field id="CmdExePth" alias="CmdExePth" table="Tsk"/>
    <field id="CmdExe" alias="CmdExe" table="Tsk" />
    <field id="LchDepErr" alias="LchDepErr" table="Tsk"/>
    <field id="LchDepWrn" alias="LchDepWrn" table="Tsk"/>
    <field id="LchSetWrn" alias="LchSetWrn" table="Tsk"/>
    <!--Launch tab elements-->
    <field id="TypLch" alias="TypLch" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="RptNum" alias="RptNum" table="Lch" transform="NUMBER" pattern="#"/>
    <field id="RptTyp" alias="RptTyp" table="Lch" transform="NUMBER" pattern="#"/>
    <field id="IdeCal" alias="IdeCal" table="Lch"/>
    <field id="IniDat" alias="IniDat" table="Lch" transform="DATE"/>
    <field id="EndDat" alias="EndDat" table="Lch" transform="DATE"/>
    <field id="IniTim" alias="IniTim" table="Lch"/>
    <field id="EndTim" alias="EndTim" table="Lch"/>
    <field id="IdSrv" alias="LchSrv" table="Lch" />
    <field id="Pth" alias="LchPth" table="Lch" />
    <field id="Pat" alias="LchPat" table="Lch" />
    <field id="SrvUsr" alias="SrvUsr" table="Lch" />
    <field id="SrvPwd" alias="SrvPwd" table="Lch" />
    <field id="WeekDays" alias="schExeWeekDays" table="Lch" transform="ARRAY" pattern=","/>
    <field id="ExeYrs" alias="schExeYrs" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeMth" alias="schExeMth" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeDay" alias="schExeDay" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeHrs" alias="schExeHour" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeMin" alias="schExeMin" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeSec" alias="schExeSec" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeDte" alias="schExeDate" table="Lch" transform="DATE"/>
    <field id="ExeTim" alias="schExeTime" table="Lch"/>

    <!--Report tab elements-->
    <field id="RepTyp" alias="RepTyp" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="RepEmaSrv" alias="RepEmaSrv" table="Tsk" transform="NUMBER" pattern="#"/>

    <field id="RepTit" alias="RepTit" table="Tsk" />
    <field id="RepMsg" alias="RepMsg" table="Tsk" />

    <field id="RepEmaDst" alias="RepEmaDst" table="Tsk" transform="ARRAY" pattern=","/>
    <field id="RepUsrDst" alias="RepUsrDst" table="Tsk" transform="ARRAY" pattern=","/>
    <field id="RepSndSta" alias="RepSndSta" table="Tsk" transform="ARRAY" pattern="," />

    <field id="RepMntId" alias="RepMntId" table="Tsk" />

    <join type="LEFT">
      <table id="AweSchTskLch" alias="Lch"/>
      <and>
        <filter left-field="Ide" left-table="Tsk" condition="eq" right-field="IdeTsk" right-table="Lch" />
      </and>
    </join>
  </query>

  <!-- Scheduler task list query for filtering (Java) -->
  <query id="javaSchedulerTaskListWfilter" public="true">
    <table id="AweSchTsk" alias="Tsk"/>
    <!--Configuration tab elements-->
    <field id="Ide" alias="Ide" table="Tsk"/>
    <field id="Nam" alias="Nam" table="Tsk"/>
    <field id="Act" alias="Act" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="Des" alias="Des" table="Tsk"/>
    <field id="NumStoExe" alias="NumStoExe" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="TimOutExe" alias="TimOutExe" table="Tsk"/>
    <field id="TypExe" alias="TypExe" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="IdeSrvExe" alias="IdeSrvExe" table="Tsk"/>
    <field id="CmdExePth" alias="CmdExePth" table="Tsk"/>
    <field id="CmdExe" alias="CmdExe" table="Tsk" />
    <field id="LchDepErr" alias="LchDepErr" table="Tsk"/>
    <field id="LchDepWrn" alias="LchDepWrn" table="Tsk"/>
    <field id="LchSetWrn" alias="LchSetWrn" table="Tsk"/>
    <!--Launch tab elements-->
    <field id="TypLch" alias="TypLch" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="RptNum" alias="RptNum" table="Lch" transform="NUMBER" pattern="#"/>
    <field id="RptTyp" alias="RptTyp" table="Lch" transform="NUMBER" pattern="#"/>
    <field id="IdeCal" alias="IdeCal" table="Lch"/>
    <field id="IniDat" alias="IniDat" table="Lch" transform="DATE"/>
    <field id="EndDat" alias="EndDat" table="Lch" transform="DATE"/>
    <field id="IniTim" alias="IniTim" table="Lch"/>
    <field id="EndTim" alias="EndTim" table="Lch"/>
    <field id="IdSrv" alias="LchSrv" table="Lch" />
    <field id="Pth" alias="LchPth" table="Lch" />
    <field id="Pat" alias="LchPat" table="Lch" />
    <field id="SrvUsr" alias="SrvUsr" table="Lch" />
    <field id="SrvPwd" alias="SrvPwd" table="Lch" />
    <field id="WeekDays" alias="schExeWeekDays" table="Lch" transform="ARRAY" pattern=","/>
    <field id="ExeYrs" alias="schExeYrs" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeMth" alias="schExeMth" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeDay" alias="schExeDay" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeHrs" alias="schExeHour" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeMin" alias="schExeMin" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeSec" alias="schExeSec" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeDte" alias="schExeDate" table="Lch" transform="DATE"/>
    <field id="ExeTim" alias="schExeTime" table="Lch"/>

    <!--Report tab elements-->
    <field id="RepTyp" alias="RepTyp" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="RepEmaSrv" alias="RepEmaSrv" table="Tsk" transform="NUMBER" pattern="#"/>

    <field id="RepTit" alias="RepTit" table="Tsk" />
    <field id="RepMsg" alias="RepMsg" table="Tsk" />

    <field id="RepEmaDst" alias="RepEmaDst" table="Tsk" transform="ARRAY" pattern=","/>
    <field id="RepUsrDst" alias="RepUsrDst" table="Tsk" transform="ARRAY" pattern=","/>
    <field id="RepSndSta" alias="RepSndSta" table="Tsk" transform="ARRAY" pattern="," />

    <field id="RepMntId" alias="RepMntId" table="Tsk" />

    <join type="LEFT">
      <table id="AweSchTskLch" alias="Lch"/>
      <and>
        <filter left-field="Ide" left-table="Tsk" condition="eq" right-field="IdeTsk" right-table="Lch" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Ide" left-table="Tsk" condition="eq" right-variable="Ide" optional="true" />
        <!--<filter field="Sta" condition="eq" variable="Sta" optional="true" />-->
        <filter left-field="TypLch" left-table="Tsk" condition="eq" right-variable="TypLch" optional="true" />
        <filter left-field="Act" left-table="Tsk" condition="eq" right-variable="active" optional="true" />
      </and>
    </where>
    <variable id="Ide" type="INTEGER" name="CrtTsk" />
    <!--<variable id="Sta" type="INTEGER" name="CrtSta" />-->
    <variable id="TypLch" type="INTEGER" name="CrtLch" />
    <variable id="active" type="INTEGER" name="CrtAct" />
  </query>

  <!-- Get task average time -->

  <query id="getSchedulerTaskAvgTime" public="true">
    <table id="AweSchTskAvgTim"/>
    <field id="Ide" alias="Ide"/>
    <field id="IdeTsk" alias="IdeTsk"/>
    <field id="AvgTim" alias="AvgTim"/>
    <field id="ExeDatTim" alias="ExeDatTim"/>
    <where>
      <and>
        <filter left-field="IdeTsk" condition="eq" right-variable="IdeTsk"/>
      </and>
    </where>
    <order-by field="ExeDatTim" type="DESC"/>
    <variable id="IdeTsk" type="INTEGER" name="IdeTsk"/>
  </query>

  <query id="yearSelectService" service="yearSelectService">
    <field id="yearStr" alias="label"/>
    <field id="yearVal" alias="value"/>
  </query>

  <!--Scheduler Task by Id-->
  <query id="SchTsk" public="true">
    <table id="AweSchTsk" alias="Tsk"/>
    <!--Configuration tab elements-->
    <field id="Ide" alias="Ide" table="Tsk"/>
    <field id="Nam" alias="Nam" table="Tsk"/>
    <field id="Act" alias="Act" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="Des" alias="Des" table="Tsk"/>
    <field id="NumStoExe" alias="NumStoExe" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="TimOutExe" alias="TimOutExe" table="Tsk"/>
    <field id="TypExe" alias="TypExe" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="IdeSrvExe" alias="IdeSrvExe" table="Tsk"/>
    <field id="CmdExePth" alias="CmdExePth" table="Tsk"/>
    <field id="CmdExe" alias="CmdExe" table="Tsk" />
    <field id="CmdExe" alias="maintain" table="Tsk" />
    <field id="CmdExe" alias="command" table="Tsk" />
    <field id="LchDepErr" alias="LchDepErr" table="Tsk"/>
    <field id="LchDepWrn" alias="LchDepWrn" table="Tsk"/>
    <field id="LchSetWrn" alias="LchSetWrn" table="Tsk"/>
    <!--Launch tab elements-->
    <field id="TypLch" alias="TypLch" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="RptNum" alias="RptNum" table="Lch" transform="NUMBER" pattern="#"/>
    <field id="RptTyp" alias="RptTyp" table="Lch" transform="NUMBER" pattern="#"/>
    <field id="IdeCal" alias="IdeCal" table="Lch"/>
    <field id="IniDat" alias="IniDat" table="Lch" transform="DATE"/>
    <field id="EndDat" alias="EndDat" table="Lch" transform="DATE"/>
    <field id="IniTim" alias="IniTim" table="Lch"/>
    <field id="EndTim" alias="EndTim" table="Lch"/>
    <field id="IdSrv" alias="LchSrv" table="Lch" />
    <field id="Pth" alias="LchPth" table="Lch" />
    <field id="Pat" alias="LchPat" table="Lch" />
    <field id="SrvUsr" alias="LchUsr" table="Lch" />
    <field id="SrvPwd" alias="LchPwd" table="Lch" />
    <field id="WeekDays" alias="schExeWeekDays" table="Lch" transform="ARRAY" pattern=","/>
    <field id="ExeYrs" alias="schExeYrs" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeMth" alias="schExeMth" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeDay" alias="schExeDay" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeHrs" alias="schExeHour" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeMin" alias="schExeMin" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeSec" alias="schExeSec" table="Lch" transform="ARRAY" pattern="," />
    <field id="ExeDte" alias="schExeDate" table="Lch" transform="DATE"/>
    <field id="ExeTim" alias="schExeTime" table="Lch"/>

    <!--Report tab elements-->
    <field id="RepTyp" alias="RepTyp" table="Tsk" transform="NUMBER" pattern="#"/>
    <field id="RepEmaSrv" alias="RepEmaSrv" table="Tsk" transform="NUMBER" pattern="#"/>

    <field id="RepTit" alias="RepTit" table="Tsk" />
    <field id="RepMsg" alias="RepMsg" table="Tsk" />

    <field id="RepEmaDst" alias="RepEmaDst" table="Tsk" transform="ARRAY" pattern=","/>
    <field id="RepUsrDst" alias="RepUsrDst" table="Tsk" transform="ARRAY" pattern=","/>
    <field id="RepSndSta" alias="RepSndSta" table="Tsk" transform="ARRAY" pattern="," />

    <field id="RepMntId" alias="RepMntId" table="Tsk" />

    <join type="LEFT">
      <table id="AweSchTskLch" alias="Lch"/>
      <and>
        <filter left-field="Ide" left-table="Tsk" condition="eq" right-field="IdeTsk" right-table="Lch" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="Ide" left-table="Tsk" condition="eq" right-variable="Tsk" optional="true" />
      </and>
    </where>
    <variable id="Tsk" type="INTEGER" name="IdeTsk.selected"/>
  </query>

  <!-- Scheduler dependency list -->
  <query id="AweSchTskDpnLst" public="true">
    <table id="AweSchTskDpn" alias="Dpn"/>
    <field id="IdeTsk" alias="id" table="Dpn"/>
    <field id="IdeTsk" alias="IdeTsk" table="Dpn"/>
    <field id="IdePrn" alias="IdePrn" table="Dpn"/>
    <field id="IsBlk" alias="DepTskBlk" table="Dpn"/>
    <field id="DpnOrd" alias="DepTskOrd" table="Dpn" />
    <field id="Nam" alias="Nam" table="Tsk"/>
    <compound alias="DepTskIde">
      <computed format="[IdeTsk]" alias="value" />
      <computed format="[Nam]" alias="label"/>
    </compound>
    <join>
      <table id="AweSchTsk" alias="Tsk" />
      <and>
        <filter left-field="IdeTsk" left-table="Dpn" condition="eq" right-field="Ide" right-table="Tsk" />
      </and>
    </join>
    <where>
      <and>
        <filter left-field="IdePrn" left-table="Dpn" condition="eq" right-variable="IdeTsk"/>
      </and>
    </where>
    <order-by field="DpnOrd" table="Dpn" type="ASC"/>
    <variable id="IdeTsk" type="INTEGER" name="Ide"/>
  </query>

  <!-- Scheduler server list -->
  <query id="AweSchTskParLst" public="true">
    <table id="AweSchTskPar"/>
    <field id="Ide" alias="id"/>
    <field id="Ide" alias="IdePar"/>
    <field id="Nam" alias="ParNam"/>
    <field id="Src" alias="ParSrc"/>
    <field id="Typ" alias="ParTyp"/>
    <field id="Val" alias="ParVal"/>
    <where>
      <and>
        <filter left-field="IdeTsk" condition="eq" right-variable="IdeTsk"/>
      </and>
    </where>
    <variable id="IdeTsk" type="INTEGER" name="Ide"/>
  </query>

  <!-- Scheduler server list -->
  <query id="SchSrvLst">
    <table id="AweSchSrv" alias="Srv"/>
    <field id="Ide" alias="id" table="Srv"/>
    <field id="Ide" alias="Ide" table="Srv"/>
    <field id="Nom" alias="Nom" table="Srv"/>
    <field id="Pro" alias="Pro" table="Srv"/>
    <field id="Hst" alias="Hst" table="Srv"/>
    <field id="Prt" alias="Prt" table="Srv"/>
    <field id="Act" alias="Act" table="Srv"/>
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Act]" alias="value" />
      <computed format="[Act]" alias="label" translate="Es1Es0"/>
    </compound>
    <where>
      <and>
        <filter left-field="Nom" left-table="Srv" condition="like" right-variable="Nom" optional="true"/>
        <filter left-field="Hst" left-table="Srv" condition="like" right-variable="Hst" optional="true"/>
      </and>
    </where>
    <variable id="Nom" type="STRINGB" name="UsrNme"/>
    <variable id="Hst" type="STRINGB" name="SrvCon"/>
  </query>

  <!--Scheduler server by id-->
  <query id="SchSrv" public="true">
    <table id="AweSchSrv" alias="Srv"/>
    <field id="Ide" alias="Ide" table="Srv"/>
    <field id="Nom" alias="Nom" table="Srv"/>
    <field id="Pro" alias="Pro" table="Srv"/>
    <field id="Hst" alias="Hst" table="Srv"/>
    <field id="Prt" alias="Prt" table="Srv"/>
    <field id="Act" alias="Act" table="Srv" transform="NUMBER"/>
    <where>
      <and>
        <filter left-field="Ide" left-table="Srv" condition="eq" right-variable="Ide" optional="false"/>
      </and>
    </where>
    <variable id="Ide" type="STRING" name="Ide.selected"/>
  </query>

  <!-- Scheduler Server Suggest -->
  <query id="SchSrvSug">
    <table id="AweSchSrv"/>
    <field id="Ide" alias="value"/>
    <field id="Nom" alias="label"/>
    <where>
      <and>
        <or>
          <filter left-field="Nom" condition="like" right-variable="suggest" ignorecase="true"/>
          <filter left-field="Ide" condition="eq" right-variable="key" />
        </or>
        <filter left-field="Act" condition="eq" right-variable="active"/>
      </and>
    </where>
    <variable id="suggest" type="STRINGB" name="suggest"/>
    <variable id="active" type="INTEGER" value="1"/>
    <variable id="key" type="INTEGER" name="suggest" />
  </query>

  <!-- Active scheduler task suggest without parents (only with manual launch) -->
  <query id="SchTskSugAct">
    <!-- Scheduler task suggest -->
    <table id="AweSchTsk"/>
    <field id="Ide" alias="value"/>
    <field id="Nam" alias="label"/>
    <field id="TypLch" alias="TypLch" noprint="true"/>
    <where>
      <and>
        <filter left-field="Nam" condition="like" right-variable="suggest" ignorecase="true"/>
        <filter left-field="TypLch" condition="eq" right-variable="LchTyp"/>
        <filter left-field="Ide" condition="ne" right-variable="IdeTsk" optional="true"/>
      </and>
    </where>
    <variable id="LchTyp" type="INTEGER" value="0"/>
    <variable id="suggest" type="STRINGB" name="suggest"/>
    <variable id="IdeTsk" type="INTEGER" name="Ide"/>
  </query>

  <!-- Scheduler Calendar Suggest -->
  <query id="SchCalSug">
    <table id="AweSchCal"/>
    <field id="Ide" alias="value"/>
    <field id="Nom" alias="label"/>
    <where>
      <and>
        <or>
          <filter left-field="Nom" condition="like" right-variable="suggest" ignorecase="true"/>
          <filter left-field="Ide" condition="eq" right-variable="Ide"/>
        </or>
        <filter left-field="Act" condition="eq" right-variable="active"/>
      </and>
    </where>
    <variable id="suggest" type="STRINGB" name="suggest"/>
    <variable id="active" type="INTEGER" value="1"/>
    <variable id="Ide" type="INTEGER" name="suggest" optional="true"/>
  </query>

  <!-- Scheduler Calendar List -->
  <query id="SchCalLst" public="true">
    <table id="AweSchCal" alias="Cal"/>
    <field id="Ide" alias="id" table="Cal"/>
    <field id="Ide" alias="Ide" table="Cal"/>
    <field id="Nom" alias="Nom" table="Cal"/>
    <field id="Des" alias="Des" table="Cal"/>
    <field id="Act" alias="Act" table="Cal"/>
    <compound alias="ActIco">
      <computed format="'[Act]' == '0' ? 'fa-times' : 'fa-check'" alias="icon" eval="true"/>
      <computed format="'[Act]' == '0' ? 'text-danger' : 'text-success'" alias="style" eval="true"/>
      <computed format="[Act]" alias="value" />
      <computed format="[Act]" alias="label" translate="Es1Es0"/>
    </compound>
    <where>
      <and>
        <filter left-field="Nom" left-table="Cal" condition="like" right-variable="Nom" optional="true" ignorecase="true"/>
        <filter left-field="Act" left-table="Cal" condition="eq" right-variable="active" optional="true"/>
      </and>
    </where>
    <variable id="Nom" type="STRINGB" name="CrtCalNme"/>
    <variable id="active" type="INTEGER" name="CrtCalAct"/>
  </query>

  <!-- Scheduler calendar list for java service -->
  <query id="javaSchCalLst" public="true">
    <table id="AweSchCal" alias="Cal"/>
    <field id="Ide" alias="id" table="Cal"/>
    <field id="Ide" alias="Ide" table="Cal"/>
    <field id="Nom" alias="Nom" table="Cal"/>
    <field id="Des" alias="Des" table="Cal"/>
    <field id="Act" alias="Act" table="Cal"/>
  </query>

  <!-- Scheduler Calendar by Id for java service -->
  <query id="javaSchCal" public="true">
    <table id="AweSchCal" alias="Cal"/>
    <field alias="Nom" id="Nom" table="Cal"/>
    <field alias="Des" id="Des" table="Cal"/>
    <field alias="Act" id="Act" table="Cal" transform="NUMBER"/>
    <where>
      <and>
        <filter left-field="Ide" left-table="Cal" condition="eq" right-variable="IdeCal" optional="false"/>
      </and>
    </where>
    <variable id="IdeCal" type="STRING" name="Ide.selected"/>
  </query>

  <!-- Scheduler Calendar by Id -->
  <query id="SchCal" public="true">
    <table id="AweSchCal" alias="Cal"/>
    <field alias="CalNme" id="Nom" table="Cal"/>
    <field alias="CalDes" id="Des" table="Cal"/>
    <field alias="CalAct" id="Act" table="Cal" transform="NUMBER"/>
    <where>
      <and>
        <filter left-field="Ide" left-table="Cal" condition="eq" right-variable="IdeCal" optional="false"/>
      </and>
    </where>
    <variable id="IdeCal" type="STRING" name="Ide.selected"/>
  </query>

  <!-- Scheduler Calendar Date List -->
  <query id="SchCalDatLst" public="true">
    <table id="AweSchCalDat" alias="Cal"/>
    <field id="Ide" alias="id" table="Cal"/>
    <field id="Ide" alias="IdeDat" table="Cal"/>
    <field id="Nom" alias="Nom" table="Cal"/>
    <field id="Dat" alias="Dat" table="Cal" transform="TIMESTAMP"/>
    <where>
      <and>
        <filter left-field="IdeCal" left-table="Cal" condition="eq" right-variable="IdeCal" optional="false"/>
      </and>
    </where>
    <order-by field="Dat"/>
    <variable id="IdeCal" type="STRING" name="CalIde"/>
  </query>

  <!-- chec if ther is some trigger with the selected calendar -->
  <query id="chkTrgCntCal" service="checkTriggerContainsCalendar">
    <variable id="calendarIde" type="INTEGER" name="Ide.selected"/>
  </query>

  <!-- File -->
  <!-- Load maintain variable list -->
  <query id="SchFil" public="true">
    <table id="AweSchTskFilMod"/>
    <field id="FilPth" alias="FilPth"/>
    <field id="ModDat" alias="ModDat" transform="TIMESTAMP"/>
    <where>
      <and>
        <filter left-field="IdeTsk" condition="eq" right-variable="IdeTsk"/>
      </and>
    </where>
    <variable id="IdeTsk" type="INTEGER" name="IdeTsk"/>
  </query>


  <!-- Utils -->
  <!-- Load maintain variable list -->
  <query id="loadMaintainVariables" service="loadMaintainVariables">
    <variable id="maintainStr" type="STRING" name="CmdExe"/>
    <compound alias="RowIco">
      <computed alias="icon" format="plus"/>
      <computed alias="label" format="Added"/>
      <computed alias="value" format="INSERT"/>
    </compound>
    <computed alias="RowTyp" format="INSERT"/>
  </query>

  <query id="nextExecutions" service="nextExecutions">
    <field id="nextDateTime" alias="nextDate" transform="DATE"/>
    <variable id="fireTimes" type="INTEGER" value="10"/>
  </query>
</queries>
